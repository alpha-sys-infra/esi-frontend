{"version":3,"sources":["../static/js/7.8952979f.chunk.js","pages/rolePermission/editRolePermissionModal.jsx","webpack:///./src/style/role-permission.less?b509","style/role-permission.less","pages/rolePermission/index.jsx"],"names":["webpackJsonp","1121","module","__webpack_exports__","__webpack_require__","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style__","__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal__","n","__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_3_antd_lib_tree_style__","__WEBPACK_IMPORTED_MODULE_4_antd_lib_tree__","__WEBPACK_IMPORTED_MODULE_4_antd_lib_tree___default","__WEBPACK_IMPORTED_MODULE_5_react__","__WEBPACK_IMPORTED_MODULE_5_react___default","__WEBPACK_IMPORTED_MODULE_6_api__","_createClass","defineProperties","target","props","descriptor","defineProperty","protoProps","staticProps","TreeNode","EditModal","state","id","menuFunctionList","defaultCheckKeys","checkedKeys","onCancel","setState","onOk","a","data","roleId","formData","permissions","moduleId","handFormSubmit","buildMenuListAndFunctions","menuList","list","menu","children","filter","s","parentId","permissionChildren","functions","map","isPermissionChild","topMenus","onCheck","indexOf","renderTreeNode","item","push","className","title","name","style","color","renderTree","checkable","multiple","defaultExpandAll","defaultCheckedKeys","selectable","nextProps","console","log","visible","getMenuFunctions","menuId","moduleFunctionsRes","t","menuFunctions","rolePermissions","roleFunctions","functionId","width","cancelText","okText","destroyOnClose","React","PureComponent","1122","exports","content","options","transform","locals","1123","894","__WEBPACK_IMPORTED_MODULE_0_antd_lib_tag_style__","__WEBPACK_IMPORTED_MODULE_1_antd_lib_tag__","__WEBPACK_IMPORTED_MODULE_1_antd_lib_tag___default","__WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_table__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_table___default","__WEBPACK_IMPORTED_MODULE_4_antd_lib_divider_style__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_divider__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_divider___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_7_antd_lib_notification_style__","__WEBPACK_IMPORTED_MODULE_8_antd_lib_notification__","__WEBPACK_IMPORTED_MODULE_8_antd_lib_notification___default","__WEBPACK_IMPORTED_MODULE_9_react__","__WEBPACK_IMPORTED_MODULE_9_react___default","__WEBPACK_IMPORTED_MODULE_10_api__","__WEBPACK_IMPORTED_MODULE_11__schema_SearchForm__","__WEBPACK_IMPORTED_MODULE_12__schema_role__","__WEBPACK_IMPORTED_MODULE_13__editRolePermissionModal__","__WEBPACK_IMPORTED_MODULE_14__style_role_permission_less__","RolePermission","tableFilter","code","searchFormExpand","tablePagedList","tablePagination","current","pageSize","showQuickJumper","showSizeChanger","showTotal","total","tableSorter","field","order","tableLoading","editModalVisible","columns","dataIndex","sorter","fixed","render","text","record","href","onClick","editRolePermission","editFormData","handleSearch","pager","query","pageIndex","sortBy","descending","fetch","handleReset","handleTableChange","pagination","filters","editModalOnCancel","saveRolePermission","savePermission","success","placement","message","refresh","getRolePagedList","dataRes","totalCount","rows","schema","searchSchema","uiSchema","searchUiSchema","handleSubmit","rowKey","dataSource","loading","onChange","scroll","x","bordered"],"mappings":"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","file":"static/js/7.8952979f.chunk.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 1121:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style__ = __webpack_require__(875);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_modal__ = __webpack_require__(876);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_tree_style__ = __webpack_require__(884);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_tree_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_lib_tree_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_tree__ = __webpack_require__(885);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_tree___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_lib_tree__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_api__ = __webpack_require__(79);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var TreeNode=__WEBPACK_IMPORTED_MODULE_4_antd_lib_tree___default.a.TreeNode;var EditModal=function(_React$PureComponent){_inherits(EditModal,_React$PureComponent);function EditModal(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,EditModal);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=EditModal.__proto__||Object.getPrototypeOf(EditModal)).call.apply(_ref,[this].concat(args))),_this),_this.state={id:'',menuFunctionList:[]},_this.defaultCheckKeys=[],_this.checkedKeys=[],_this.onCancel=function(){_this.props.onCancel();_this.setState({menuFunctionList:[]});_this.defaultCheckKeys=[];_this.checkedKeys=[];},_this.onOk=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function _callee(){var data;return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data={roleId:_this.props.formData.id,permissions:_this.checkedKeys,moduleId:0};_context.next=3;return _this.props.handFormSubmit(data);case 3:_this.setState({menuFunctionList:[]});_this.defaultCheckKeys=[];_this.checkedKeys=[];case 6:case'end':return _context.stop();}}},_callee,_this2);})),_this.buildMenuListAndFunctions=function(menuList){var fn=function fn(list){var _loop=function _loop(menu){var children=menuList.filter(function(s){return s.parentId==menu.id;});var permissionChildren=menu.functions.map(function(s){s.isPermissionChild=true;return s;});if(children&&children.length>0){fn(children);}menu.children=[].concat(_toConsumableArray(children),_toConsumableArray(permissionChildren));};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=list[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var menu=_step.value;_loop(menu);}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}};var topMenus=menuList.filter(function(s){return s.parentId==0;});var _loop2=function _loop2(menu){var children=menuList.filter(function(s){return s.parentId==menu.id;});var permissionChildren=menu.functions.map(function(s){s.isPermissionChild=true;return s;});if(children&&children.length>0){fn(children);}menu.children=[].concat(_toConsumableArray(children),_toConsumableArray(permissionChildren));};var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=topMenus[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var menu=_step2.value;_loop2(menu);}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return topMenus;},_this.onCheck=function(checkedKeys,info){_this.checkedKeys=checkedKeys.filter(function(s){return s.indexOf(\"menu\")<0;});},_this.renderTreeNode=function(menuFunctionList){var list=[];var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=menuFunctionList[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var item=_step3.value;if(item.children&&item.children.length>0){if(item.isPermissionChild){list.push(__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(TreeNode,{className:'permission-tree-node',title:item.name,key:item.id},_this.renderTreeNode(item.children)));}else{list.push(__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(TreeNode,{className:'clear-both',title:__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement('span',{style:{color:'rgb(181, 185, 189)'}},item.title),key:'menu'+item.id},_this.renderTreeNode(item.children)));}}else{if(item.isPermissionChild){list.push(__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(TreeNode,{className:'permission-tree-node',title:item.name,key:item.id}));}else{list.push(__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(TreeNode,{className:'clear-both',title:__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement('span',{style:{color:'rgb(181, 185, 189)'}},item.title),key:'menu'+item.id}));}}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}return list;},_this.renderTree=function(){return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd_lib_tree___default.a,{checkable:true,multiple:true,defaultExpandAll:true,defaultCheckedKeys:_this.defaultCheckKeys,onCheck:_this.onCheck,selectable:false},_this.renderTreeNode(_this.state.menuFunctionList));},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(EditModal,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){var _this3=this;console.log(121212);if(!nextProps.visible){return;}console.log(444444444);var roleId=nextProps.formData.id;Object(__WEBPACK_IMPORTED_MODULE_6_api__[\"getMenuFunctions\"])({menuId:0,roleId:roleId}).then(function(moduleFunctionsRes){var menuFunctionList=_this3.buildMenuListAndFunctions(moduleFunctionsRes.data.menuFunctions);var rolePermissions=moduleFunctionsRes.data.roleFunctions.map(function(s){return s.functionId;});_this3.defaultCheckKeys=rolePermissions;_this3.checkedKeys=rolePermissions;_this3.setState({menuFunctionList:menuFunctionList});});}},{key:'render',value:function render(){console.log(\"render\");return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default.a,{width:800,visible:this.props.visible,cancelText:'\\u5173\\u95ED',okText:'\\u63D0\\u4EA4',title:this.props.title,onCancel:this.onCancel,onOk:this.onOk,destroyOnClose:true},this.state.menuFunctionList.length>0?this.renderTree():null);}}]);return EditModal;}(__WEBPACK_IMPORTED_MODULE_5_react___default.a.PureComponent);/* harmony default export */ __webpack_exports__[\"a\"] = (EditModal);\n\n/***/ }),\n\n/***/ 1122:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(1123);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(11)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js?{\\\"importLoaders\\\":1,\\\"modules\\\":false,\\\"localIdentName\\\":\\\"[name]__[local]___[hash:base64:5]\\\"}!../../node_modules/postcss-loader/lib/index.js??postcss!../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-2-3!./role-permission.less\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js?{\\\"importLoaders\\\":1,\\\"modules\\\":false,\\\"localIdentName\\\":\\\"[name]__[local]___[hash:base64:5]\\\"}!../../node_modules/postcss-loader/lib/index.js??postcss!../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-2-3!./role-permission.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 1123:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(10)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".permission-tree-node {\\n  float: left;\\n  width: 200px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 894:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_tag_style__ = __webpack_require__(301);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_tag_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_lib_tag_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_tag__ = __webpack_require__(302);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_tag___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_lib_tag__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style__ = __webpack_require__(867);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_table__ = __webpack_require__(868);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_table___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_lib_table__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_divider_style__ = __webpack_require__(869);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_divider_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_lib_divider_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_divider__ = __webpack_require__(870);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_divider___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_lib_divider__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_notification_style__ = __webpack_require__(873);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_notification_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_antd_lib_notification_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_lib_notification__ = __webpack_require__(874);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_lib_notification___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_antd_lib_notification__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_api__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__schema_SearchForm__ = __webpack_require__(871);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__schema_role__ = __webpack_require__(883);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__editRolePermissionModal__ = __webpack_require__(1121);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__style_role_permission_less__ = __webpack_require__(1122);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__style_role_permission_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__style_role_permission_less__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var RolePermission=function(_React$PureComponent){_inherits(RolePermission,_React$PureComponent);function RolePermission(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,RolePermission);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=RolePermission.__proto__||Object.getPrototypeOf(RolePermission)).call.apply(_ref,[this].concat(args))),_this),_this.state={tableFilter:{name:\"\",code:\"\"},searchFormExpand:true,tablePagedList:[],tablePagination:{current:1,pageSize:10,showQuickJumper:true,showSizeChanger:true,showTotal:function showTotal(total){return'Total '+total+' items';}},tableSorter:{field:'',order:''},tableLoading:false,editModalVisible:false},_this.columns=[{title:'角色名称',dataIndex:'name',sorter:true},{title:'角色编码',dataIndex:'code',sorter:true},{title:'操作',dataIndex:'id',fixed:'right',width:120,render:function render(text,record){return __WEBPACK_IMPORTED_MODULE_9_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_9_react___default.a.createElement('a',{href:'javascript:;',onClick:function onClick(){return _this.editRolePermission(record);}},'\\u7F16\\u8F91\\u89D2\\u8272\\u6743\\u9650'));}}],_this.editFormData={},_this.handleSearch=function(filter){var pager=Object.assign({},_this.state.tablePagination);pager.current=1;_this.setState({tableFilter:filter,tablePagination:pager});var query={pageIndex:1,pageSize:_this.state.tablePagination.pageSize,sortBy:_this.state.tableSorter.field,descending:_this.state.tableSorter.order==='descend',filter:filter};_this.fetch(query);},_this.handleReset=function(){_this.setState({tableFilter:{}});},_this.handleTableChange=function(pagination,filters,sorter){var pager=Object.assign({},_this.state.tablePagination);pager.current=pagination.current;pager.pageSize=pagination.pageSize;_this.setState({tablePagination:pager,tableSorter:{field:sorter.field,order:sorter.order}});var query={pageIndex:pager.current,pageSize:pager.pageSize,sortBy:sorter.field,descending:sorter.order==='descend',filter:_this.state.tableFilter};_this.fetch(query);},_this.editRolePermission=function(record){_this.editFormData=Object.assign({},record);console.log(_this.editFormData);_this.setState({editModalVisible:true});},_this.editModalOnCancel=function(){_this.setState({editModalVisible:false});},_this.saveRolePermission=function(){var _ref2=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.mark(function _callee(data){var formData;return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=Object.assign({},data);_context.prev=1;_context.next=4;return Object(__WEBPACK_IMPORTED_MODULE_10_api__[\"savePermission\"])(formData);case 4:__WEBPACK_IMPORTED_MODULE_8_antd_lib_notification___default.a.success({placement:'bottomLeft bottomRight',message:'保存成功'});_this.setState({editModalVisible:false});_context.next=10;break;case 8:_context.prev=8;_context.t0=_context['catch'](1);case 10:case'end':return _context.stop();}}},_callee,_this2,[[1,8]]);}));return function(_x){return _ref2.apply(this,arguments);};}(),_this.refresh=function(){var query={pageIndex:_this.state.tablePagination.current,pageSize:_this.state.tablePagination.pageSize,sortBy:_this.state.tableSorter.field,descending:_this.state.tableSorter.order==='descend',filter:_this.state.tableFilter};_this.fetch(query);},_this.fetch=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.mark(function _callee2(){var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var dataRes,data,pagination;return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({tableLoading:true});_context2.next=3;return Object(__WEBPACK_IMPORTED_MODULE_10_api__[\"getRolePagedList\"])(query);case 3:dataRes=_context2.sent;data=dataRes.data;pagination=Object.assign({},_this.state.tablePagination);pagination.total=data.totalCount;_this.setState({tableLoading:false,tablePagedList:data.rows,tablePagination:pagination});case 8:case'end':return _context2.stop();}}},_callee2,_this2);})),_temp),_possibleConstructorReturn(_this,_ret);}/**\n     * @description 查询\n     *//**\n     * @description 重置查询\n     */_createClass(RolePermission,[{key:'componentDidMount',value:function componentDidMount(){this.refresh();}},{key:'render',value:function render(){console.log(\"RolePermission render\");return __WEBPACK_IMPORTED_MODULE_9_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_9_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11__schema_SearchForm__[\"a\" /* default */],{schema:__WEBPACK_IMPORTED_MODULE_12__schema_role__[\"a\" /* default */].searchSchema,uiSchema:__WEBPACK_IMPORTED_MODULE_12__schema_role__[\"a\" /* default */].searchUiSchema,handleSubmit:this.handleSearch,handleReset:this.handleReset}),__WEBPACK_IMPORTED_MODULE_9_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_divider___default.a,null),__WEBPACK_IMPORTED_MODULE_9_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_table___default.a,{columns:this.columns,rowKey:function rowKey(record){return record.id;},dataSource:this.state.tablePagedList,pagination:this.state.tablePagination,loading:this.state.tableLoading,onChange:this.handleTableChange,scroll:{x:768},bordered:true}),__WEBPACK_IMPORTED_MODULE_9_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13__editRolePermissionModal__[\"a\" /* default */],{visible:this.state.editModalVisible,title:__WEBPACK_IMPORTED_MODULE_9_react___default.a.createElement('span',null,'\\u7F16\\u8F91\\u89D2\\u8272\\xA0\\xA0',__WEBPACK_IMPORTED_MODULE_9_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_lib_tag___default.a,{color:'#2db7f5'},this.editFormData.name),'\\xA0\\u6743\\u9650'),onCancel:this.editModalOnCancel,formData:this.editFormData,handFormSubmit:this.saveRolePermission}));}}]);return RolePermission;}(__WEBPACK_IMPORTED_MODULE_9_react___default.a.PureComponent);/* harmony default export */ __webpack_exports__[\"default\"] = (RolePermission);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/7.8952979f.chunk.js","import React from 'react';\nimport { Modal, Tree } from 'antd';\nimport { getMenuFunctions } from 'api';\n\nconst TreeNode = Tree.TreeNode;\n\nclass EditModal extends React.PureComponent {\n    state = {\n        id: '',\n        menuFunctionList: []\n    }\n    defaultCheckKeys = []\n    checkedKeys = [];\n    onCancel = () => {\n        this.props.onCancel();\n        this.setState({\n            menuFunctionList: []\n        });\n        this.defaultCheckKeys = []\n        this.checkedKeys = []\n    }\n    onOk =async () => {\n        let data = {\n            roleId: this.props.formData.id,\n            permissions: this.checkedKeys,\n            moduleId: 0\n        };\n        await this.props.handFormSubmit(data);\n        this.setState({\n            menuFunctionList: []\n        });\n        this.defaultCheckKeys = []\n        this.checkedKeys = []\n    }\n    buildMenuListAndFunctions = (menuList) => {\n        let fn = (list) => {\n            for (let menu of list) {\n                let children = menuList.filter(s => s.parentId == menu.id);\n                let permissionChildren = menu.functions.map(s => {\n                    s.isPermissionChild = true;\n                    return s;\n                });\n                if (children && children.length > 0) {\n                    fn(children)\n                }\n                menu.children = [...children, ...permissionChildren];\n            }\n        }\n        let topMenus = menuList.filter(s => s.parentId == 0);\n        for (let menu of topMenus) {\n            let children = menuList.filter(s => s.parentId == menu.id);\n            let permissionChildren = menu.functions.map(s => {\n                s.isPermissionChild = true;\n                return s;\n            });\n            if (children && children.length > 0) {\n                fn(children)\n            }\n            menu.children = [...children, ...permissionChildren];\n        }\n        return topMenus;\n    }\n    onCheck = (checkedKeys, info) => {\n        this.checkedKeys = checkedKeys.filter(s => s.indexOf(\"menu\") < 0);\n    }\n    componentWillReceiveProps(nextProps) {\n        console.log(121212)\n        if (!nextProps.visible) {\n            return;\n        }\n        console.log(444444444)\n        let roleId = nextProps.formData.id;\n        getMenuFunctions({\n            menuId: 0,\n            roleId: roleId\n        }).then(moduleFunctionsRes => {\n            let menuFunctionList = this.buildMenuListAndFunctions(moduleFunctionsRes.data.menuFunctions)\n            let rolePermissions = moduleFunctionsRes.data.roleFunctions.map(s => s.functionId);\n            this.defaultCheckKeys = rolePermissions;\n            this.checkedKeys = rolePermissions;\n            this.setState({\n                menuFunctionList: menuFunctionList\n            });\n        });\n    }\n    renderTreeNode = (menuFunctionList) => {\n        let list = [];\n        for (let item of menuFunctionList) {\n            if (item.children && item.children.length > 0) {\n                if (item.isPermissionChild) {\n                    list.push(<TreeNode className=\"permission-tree-node\" title={item.name} key={item.id}>{this.renderTreeNode(item.children)}</TreeNode>);\n                } else {\n                    list.push(<TreeNode className=\"clear-both\" title={<span style={{ color: 'rgb(181, 185, 189)' }}>{item.title}</span>} key={'menu' + item.id}>{this.renderTreeNode(item.children)}</TreeNode>);\n                }\n            } else {\n                if (item.isPermissionChild) {\n                    list.push(<TreeNode className=\"permission-tree-node\" title={item.name} key={item.id}></TreeNode>);\n                } else {\n                    list.push(<TreeNode className=\"clear-both\" title={<span style={{ color: 'rgb(181, 185, 189)' }}>{item.title}</span>} key={'menu' + item.id}></TreeNode>);\n                }\n            }\n        }\n        return list;\n    }\n    renderTree = () => {\n        return <Tree\n            checkable\n            multiple\n            defaultExpandAll\n            defaultCheckedKeys={this.defaultCheckKeys}\n            onCheck={this.onCheck}\n            selectable={false}\n        >\n            {this.renderTreeNode(this.state.menuFunctionList)}\n        </Tree>\n    }\n    render() {\n        console.log(\"render\");\n        return (\n            <Modal\n                width={800}\n                visible={this.props.visible}\n                cancelText=\"关闭\"\n                okText=\"提交\"\n                title={this.props.title}\n                onCancel={this.onCancel}\n                onOk={this.onOk}\n                destroyOnClose\n            >\n                {this.state.menuFunctionList.length > 0 ? this.renderTree() : null}\n            </Modal >\n        )\n    }\n}\n\nexport default EditModal;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/rolePermission/editRolePermissionModal.jsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"importLoaders\\\":1,\\\"modules\\\":false,\\\"localIdentName\\\":\\\"[name]__[local]___[hash:base64:5]\\\"}!../../node_modules/postcss-loader/lib/index.js??postcss!../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-2-3!./role-permission.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js?{\\\"importLoaders\\\":1,\\\"modules\\\":false,\\\"localIdentName\\\":\\\"[name]__[local]___[hash:base64:5]\\\"}!../../node_modules/postcss-loader/lib/index.js??postcss!../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-2-3!./role-permission.less\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js?{\\\"importLoaders\\\":1,\\\"modules\\\":false,\\\"localIdentName\\\":\\\"[name]__[local]___[hash:base64:5]\\\"}!../../node_modules/postcss-loader/lib/index.js??postcss!../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-2-3!./role-permission.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/style/role-permission.less\n// module id = 1122\n// module chunks = 7","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".permission-tree-node {\\n  float: left;\\n  width: 200px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"modules\":false,\"localIdentName\":\"[name]__[local]___[hash:base64:5]\"}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js?{}!./src/style/role-permission.less\n// module id = 1123\n// module chunks = 7","import React from 'react';\nimport { Table, Divider, notification, Tag } from 'antd';\nimport {\n    getRolePagedList,\n    savePermission\n} from 'api';\nimport SearchForm from '@/schema/SearchForm';\nimport schema from '@/schema/role';\nimport EditRolePermissionModal from './editRolePermissionModal';\nimport '@/style/role-permission.less';\n\nclass RolePermission extends React.PureComponent {\n    state = {\n        tableFilter: {\n            name: \"\",\n            code: \"\"\n        },\n        searchFormExpand: true,\n        tablePagedList: [],\n        tablePagination: {\n            current: 1,\n            pageSize: 10,\n            showQuickJumper: true,\n            showSizeChanger: true,\n            showTotal: total => `Total ${total} items`\n        },\n        tableSorter: {\n            field: '',\n            order: ''\n        },\n        tableLoading: false,\n        editModalVisible: false\n    }\n    columns = [{\n        title: '角色名称',\n        dataIndex: 'name',\n        sorter: true\n    },\n    {\n        title: '角色编码',\n        dataIndex: 'code',\n        sorter: true\n    },\n    {\n        title: '操作',\n        dataIndex: 'id',\n        fixed: 'right',\n        width: 120,\n        render: (text, record) => {\n            return <div>\n                <a\n                    href=\"javascript:;\"\n                    onClick={() => this.editRolePermission(record)}\n\n                >\n                    编辑角色权限\n                </a>\n            </div>\n        }\n    }]\n    editFormData = {\n\n    }\n    /**\n     * @description 查询\n     */\n    handleSearch = (filter) => {\n        const pager = { ...this.state.tablePagination };\n        pager.current = 1;\n        this.setState({\n            tableFilter: filter,\n            tablePagination: pager\n        });\n        let query = {\n            pageIndex: 1,\n            pageSize: this.state.tablePagination.pageSize,\n            sortBy: this.state.tableSorter.field,\n            descending: this.state.tableSorter.order === 'descend',\n            filter: filter\n        };\n        this.fetch(query);\n    }\n    /**\n     * @description 重置查询\n     */\n    handleReset = () => {\n        this.setState({\n            tableFilter: {}\n        });\n    }\n    handleTableChange = (pagination, filters, sorter) => {\n        const pager = { ...this.state.tablePagination };\n        pager.current = pagination.current;\n        pager.pageSize = pagination.pageSize;\n        this.setState({\n            tablePagination: pager,\n            tableSorter: {\n                field: sorter.field,\n                order: sorter.order\n            }\n        });\n        let query = {\n            pageIndex: pager.current,\n            pageSize: pager.pageSize,\n            sortBy: sorter.field,\n            descending: sorter.order === 'descend',\n            filter: this.state.tableFilter\n        };\n        this.fetch(query);\n    }\n    editRolePermission = (record) => {\n        this.editFormData = { ...record };\n        console.log(this.editFormData)\n        this.setState({\n            editModalVisible: true\n        })\n    }\n    editModalOnCancel = () => {\n        this.setState({\n            editModalVisible: false\n        });\n    }\n    saveRolePermission = async (data) => {\n        let formData = {...data }\n        try {\n            await savePermission(formData);\n            notification.success({\n                placement: 'bottomLeft bottomRight',\n                message: '保存成功',\n            });\n            this.setState({\n                editModalVisible: false\n            });\n        }\n        catch (e) {\n\n        }\n    }\n    refresh = () => {\n        let query = {\n            pageIndex: this.state.tablePagination.current,\n            pageSize: this.state.tablePagination.pageSize,\n            sortBy: this.state.tableSorter.field,\n            descending: this.state.tableSorter.order === 'descend',\n            filter: this.state.tableFilter\n        };\n        this.fetch(query);\n    }\n    fetch = async (query = {}) => {\n        this.setState({ tableLoading: true });\n        let dataRes = await getRolePagedList(query);\n        let data = dataRes.data;\n        const pagination = { ...this.state.tablePagination };\n        pagination.total = data.totalCount;\n        this.setState({\n            tableLoading: false,\n            tablePagedList: data.rows,\n            tablePagination: pagination\n        });\n    }\n    componentDidMount() {\n        this.refresh()\n    }\n    render() {\n        console.log(\"RolePermission render\")\n        return (\n            <div>\n                <SearchForm schema={schema.searchSchema} uiSchema={schema.searchUiSchema} handleSubmit={this.handleSearch} handleReset={this.handleReset} />\n                <Divider />\n                <Table\n                    columns={this.columns}\n                    rowKey={record => record.id}\n                    dataSource={this.state.tablePagedList}\n                    pagination={this.state.tablePagination}\n                    loading={this.state.tableLoading}\n                    onChange={this.handleTableChange}\n                    scroll={{ x: 768 }}\n                    bordered\n                />\n                <EditRolePermissionModal\n                    visible={this.state.editModalVisible}\n                    title={<span>编辑角色&nbsp;&nbsp;<Tag color=\"#2db7f5\">{this.editFormData.name}</Tag>&nbsp;权限</span>}\n                    onCancel={this.editModalOnCancel}\n\n                    formData={this.editFormData}\n                    handFormSubmit={this.saveRolePermission}\n                />\n            </div>\n        );\n    }\n}\n\nexport default RolePermission;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/rolePermission/index.jsx"],"sourceRoot":""}