{"version":3,"sources":["../static/js/8.b704d1c5.chunk.js","pages/example/JsonForm/DynamicForm/DynamicForm.jsx","schema/DynamicForm.js","schema/dynamicFormSchemaUtil.js","pages/example/JsonForm/DynamicForm/index.jsx"],"names":["webpackJsonp","1514","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0_antd_lib_divider_style__","__WEBPACK_IMPORTED_MODULE_1_antd_lib_divider__","n","__WEBPACK_IMPORTED_MODULE_1_antd_lib_divider___default","__WEBPACK_IMPORTED_MODULE_2_antd_lib_button_style__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_button__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_button___default","__WEBPACK_IMPORTED_MODULE_4_antd_lib_tag_style__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_tag__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_tag___default","__WEBPACK_IMPORTED_MODULE_6_antd_lib_input_style__","__WEBPACK_IMPORTED_MODULE_7_antd_lib_input__","__WEBPACK_IMPORTED_MODULE_7_antd_lib_input___default","__WEBPACK_IMPORTED_MODULE_8_react__","__WEBPACK_IMPORTED_MODULE_8_react___default","__WEBPACK_IMPORTED_MODULE_9__schema_DynamicForm__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","TextArea","schema","uiSchema","required","message","max","span","minRows","maxRows","label","children","data","disabled","showTime","format","title","checkedChildren","unCheckedChildren","width","formData","DynamicFormTest","state","toggleParseSchema","error","JSON","stringify","val","toString","schemaChange","e","uiSchemaChange","formDataChange","parseSchema","parse","k","v","indexOf","Function","setState","getFormData","handleSubmit","editForm","handleReset","console","log","color","rows","defaultValue","this","onChange","style","marginTop","type","onClick","ref","React","PureComponent","1515","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","__WEBPACK_IMPORTED_MODULE_1__dynamicFormSchemaUtil__","DynamicForm","formRef","form","validateFields","err","values","resetFields","FormComponent","util","getForm","wrappedComponentRef","1516","_toConsumableArray","arr","Array","isArray","arr2","from","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","arg","info","done","then","__WEBPACK_IMPORTED_MODULE_0_antd_lib_row_style__","__WEBPACK_IMPORTED_MODULE_1_antd_lib_row__","__WEBPACK_IMPORTED_MODULE_1_antd_lib_row___default","__WEBPACK_IMPORTED_MODULE_2_antd_lib_col_style__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_col__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_col___default","__WEBPACK_IMPORTED_MODULE_4_antd_lib_cascader_style__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_cascader__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_cascader___default","__WEBPACK_IMPORTED_MODULE_6_antd_lib_switch_style__","__WEBPACK_IMPORTED_MODULE_7_antd_lib_switch__","__WEBPACK_IMPORTED_MODULE_7_antd_lib_switch___default","__WEBPACK_IMPORTED_MODULE_8_antd_lib_select_style__","__WEBPACK_IMPORTED_MODULE_9_antd_lib_select__","__WEBPACK_IMPORTED_MODULE_9_antd_lib_select___default","__WEBPACK_IMPORTED_MODULE_10_antd_lib_radio_style__","__WEBPACK_IMPORTED_MODULE_11_antd_lib_radio__","__WEBPACK_IMPORTED_MODULE_11_antd_lib_radio___default","__WEBPACK_IMPORTED_MODULE_12_antd_lib_date_picker_style__","__WEBPACK_IMPORTED_MODULE_13_antd_lib_date_picker__","__WEBPACK_IMPORTED_MODULE_13_antd_lib_date_picker___default","__WEBPACK_IMPORTED_MODULE_14_antd_lib_checkbox_style__","__WEBPACK_IMPORTED_MODULE_15_antd_lib_checkbox__","__WEBPACK_IMPORTED_MODULE_15_antd_lib_checkbox___default","__WEBPACK_IMPORTED_MODULE_16_antd_lib_input_number_style__","__WEBPACK_IMPORTED_MODULE_17_antd_lib_input_number__","__WEBPACK_IMPORTED_MODULE_17_antd_lib_input_number___default","__WEBPACK_IMPORTED_MODULE_18_antd_lib_input_style__","__WEBPACK_IMPORTED_MODULE_19_antd_lib_input__","__WEBPACK_IMPORTED_MODULE_19_antd_lib_input___default","__WEBPACK_IMPORTED_MODULE_20_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_20_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_21_antd_lib_form_style__","__WEBPACK_IMPORTED_MODULE_22_antd_lib_form__","__WEBPACK_IMPORTED_MODULE_22_antd_lib_form___default","__WEBPACK_IMPORTED_MODULE_23_react__","__WEBPACK_IMPORTED_MODULE_23_react___default","__WEBPACK_IMPORTED_MODULE_24_create_react_class__","__WEBPACK_IMPORTED_MODULE_24_create_react_class___default","__WEBPACK_IMPORTED_MODULE_25_api__","__WEBPACK_IMPORTED_MODULE_26__FormRemoteDataUtil__","FormItem","Item","JsxGeneratorMap","Map","FormMap","UiSchemaMap","FormInstanceMap","FormInstanceIndexMap","SchemaUtils","id","has","get","newForm","createForm","set","tmpComponent","createClass","getInitialState","index","inited","generateJsx","componentWillMount","componentDidMount","mergeSchema","getRemoteData","componentDidUpdate","prevProps","propsSchema","propsUiSchema","componentWillUnmount","delete","size","render","formInstanceIndex","keys","forEach","schemaProperty","uiSchemaProperty","push","validator","rule","callback","msg","getFieldValue","name","join","calls","field","getCascaderRemoteData","result","all","items","schemaProperties","transformInputNumber","transformCheckbox","transformDatetime","transformRadio","transformSelect","transformSwitch","transformCascader","transformBetween","transformNormal","formItems","getFieldDecorator","item","apiKey","api","res","remoteDataUtil","addData","transformInput","formItemWrapper","initialValue","rules","Group","dataOptions","options","o","Option","valuePropName","begin","end","betweenFormItemWrapper","formItem","beginItem","endItem","isNumber","sm","md","lg","xl","xs","display","textAlign","913","__WEBPACK_IMPORTED_MODULE_4_antd_lib_card_style__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_card__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_card___default","__WEBPACK_IMPORTED_MODULE_6_react__","__WEBPACK_IMPORTED_MODULE_6_react___default","__WEBPACK_IMPORTED_MODULE_7__DynamicForm__","FormTest"],"mappings":"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","file":"static/js/8.b704d1c5.chunk.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ 1514:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_divider_style__ = __webpack_require__(869);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_divider_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_lib_divider_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_divider__ = __webpack_require__(870);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_divider___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_lib_divider__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_button_style__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_button_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_lib_button_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_button__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_button___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_lib_button__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_tag_style__ = __webpack_require__(301);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_tag_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_lib_tag_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_tag__ = __webpack_require__(302);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_tag___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_lib_tag__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_lib_input_style__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_lib_input_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_antd_lib_input_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_input__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_input___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_antd_lib_input__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__schema_DynamicForm__ = __webpack_require__(1515);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var TextArea=__WEBPACK_IMPORTED_MODULE_7_antd_lib_input___default.a.TextArea;var schema={\"$id\":\"dynamic-edit-schema\",\"title\":\"dynamic-edit-schema\",\"description\":\"dynamic-edit-schema.\",\"type\":\"object\",\"required\":[\"moduleId\",\"name\",\"code\"],//可传给后端判断，暂时不使用此处配置检验前端表单,前端表单校验规则配置在uiSchema\n\"properties\":{\"id\":{\"type\":\"string\"},\"moduleId\":{\"type\":\"string\",\"title\":\"模块Id\",\"description\":\"相关菜单模块\"},\"module\":{\"type\":\"string\",\"title\":\"模块名称\"},\"name\":{\"type\":\"string\",\"title\":\"功能名称\",\"maxLength\":25,//可传给后端判断，暂时不使用此处配置检验前端表单,前端表单校验规则配置在uiSchema\n\"minLength\":1},\"code\":{\"type\":\"string\",\"title\":\"功能编码\",\"maxLength\":25,\"minLength\":1},\"description\":{\"type\":\"string\",\"title\":\"功能描述\",\"maxLength\":300},\"int\":{\"type\":\"integer\",\"title\":\"整数组件\"},\"number\":{\"type\":\"number\",\"title\":\"浮点数组件\"},\"checkbox\":{\"type\":\"array\",\"title\":\"checkbox组件\"},\"password\":{\"type\":\"string\",\"title\":\"密码\"},\"datetime\":{\"type\":\"string\",\"title\":\"datetime组件\"},\"radio\":{\"type\":\"string\",\"title\":\"radio组件\"},\"select\":{\"type\":\"array\",\"title\":\"select组件\"},\"switch\":{\"type\":\"boolean\",\"title\":\"switch组件\"},\"numberBetweenBegin\":{\"type\":\"number\",\"title\":\"numberBetweenBegin\"},\"numberBetweenEnd\":{\"type\":\"number\",\"title\":\"numberBetweenEnd\"},\"dateBetweenBegin\":{\"type\":\"string\",\"title\":\"dateBetweenBegin\"},\"dateBetweenEnd\":{\"type\":\"string\",\"title\":\"dateBetweenEnd\"}}};var uiSchema={\"name\":{\"ui:widget\":\"input\",\"ui:options\":{\"type\":\"text\",\"placeholder\":\"\"},\"ui:rules\":[{required:true,message:'请输入功能名称'},{max:25,message:'最多输入25字符'}],//校验规则\n\"ui:title\":\"功能名称\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,//\"extra\":\"121212\",//未设置取ui:description\n\"labelCol\":{span:6},\"wrapperCol\":{span:16}//Form.Item 配置\n}},\"code\":{\"ui:widget\":\"input\",\"ui:options\":{\"type\":\"text\",\"placeholder\":\"\"},\"ui:rules\":[{required:true,message:'请输入功能编码'},{max:25,message:'最多输入25字符'}],//校验规则\n\"ui:title\":\"功能编码\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,//\"extra\":\"121212\",//未设置取ui:description\n\"labelCol\":{span:6},\"wrapperCol\":{span:16}//Form.Item 配置\n}},\"description\":{\"ui:widget\":\"input.textarea\",\"ui:options\":{\"style\":{\"width\":400,\"height\":200},\"autoSize\":{minRows:2,maxRows:6},\"placeholder\":\"\"},\"ui:rules\":[{max:300,message:'最多输入300字符!'}],//校验规则\n\"ui:title\":\"功能描述\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,//\"extra\":\"121212\",//未设置取ui:description\n\"labelCol\":{span:6},\"wrapperCol\":{span:16}//Form.Item 配置\n}},\"moduleId\":{\"ui:widget\":\"cascader\",//级联\n\"ui:options\":{\"fieldNames\":{label:'title',value:'id',children:'children'},\"options\":[]},//组件属性配置\n\"ui:rules\":[{required:true,message:'请选择模块!'}],//校验规则\n\"ui:remoteConfig\":{\"apiKey\":\"getAllMenu\",\"hand\":function hand(data){return data;}//数据处理函数\n},\"ui:title\":\"模块\",//未设置取schema 中定义的title\n//\"ui:description\": \"请选择模块\",//未设置取 schema 中定义的description\n\"ui:formItemConfig\":{\"hasFeedback\":true,//\"extra\":\"121212\",//未设置取ui:description\n\"label\":\"模块\",//未设置取ui:title,\n\"labelCol\":{span:6},\"wrapperCol\":{span:16}//Form.Item 配置\n}},\"int\":{\"ui:widget\":\"inputNumber\",\"ui:options\":{},\"ui:rules\":[{required:true,message:'不能为空!'}],\"ui:defaultValue\":0,\"ui:title\":\"整数组件\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,\"labelCol\":{span:6},\"wrapperCol\":{span:16}}},\"number\":{\"ui:widget\":\"inputNumber\",\"ui:options\":{\"step\":0.1},\"ui:rules\":[{required:true,message:'不能为空!'}],\"ui:defaultValue\":0.1,\"ui:title\":\"浮点数组件\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,\"labelCol\":{span:6},\"wrapperCol\":{span:16}}},\"checkbox\":{\"ui:widget\":\"checkbox\",\"ui:options\":{\"options\":[{label:'Apple',value:'AppleValue'},{label:'Pear',value:'PearValue'},{label:'Orange',value:'OrangeValue',disabled:false}]},\"ui:rules\":[{required:true,message:'不能为空!'}],\"ui:defaultValue\":['AppleValue'],\"ui:title\":\"checkbox组件\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"labelCol\":{span:6},\"wrapperCol\":{span:16}}},\"password\":{\"ui:widget\":\"input\",\"ui:options\":{\"type\":\"password\",\"placeholder\":\"密码\"},\"ui:rules\":[{required:true,message:'不能为空!'}],\"ui:title\":\"密码\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,\"labelCol\":{span:6},\"wrapperCol\":{span:16}}},\"datetime\":{\"ui:widget\":\"datetime\",\"ui:options\":{showTime:true,format:\"YYYY-MM-DD HH:mm:ss\"},\"ui:rules\":[{required:true,message:'不能为空!'}],\"ui:title\":\"datetime\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,\"labelCol\":{span:6},\"wrapperCol\":{span:16}}},\"radio\":{\"ui:widget\":\"radio\",\"ui:options\":{\"options\":[{label:'Apple',value:'AppleValue'},{label:'Pear',value:'PearValue'},{label:'Orange',value:'OrangeValue',disabled:false}]},\"ui:rules\":[{required:true,message:'不能为空!'}],\"ui:defaultValue\":'AppleValue',\"ui:title\":\"radio组件\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"labelCol\":{span:6},\"wrapperCol\":{span:16}}},\"select\":{\"ui:widget\":\"select\",\"ui:options\":{},\"ui:rules\":[{required:true,message:'不能为空!'}],\"ui:dataOptions\":[{title:'Jack',value:'jack'},{title:'Lucy',value:'lucy'},{title:'Tom',value:'tom',disabled:true}],\"ui:defaultValue\":'lucy',\"ui:title\":\"select组件\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,\"labelCol\":{span:6},\"wrapperCol\":{span:16}}},\"switch\":{\"ui:widget\":\"switch\",\"ui:options\":{checkedChildren:'激活',unCheckedChildren:'锁定'},\"ui:defaultValue\":true,\"ui:title\":\"switch\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"labelCol\":{span:6},\"wrapperCol\":{span:16}}},\"numberBetween\":{\"ui:widget\":\"between\",\"ui:type\":\"number\",\"ui:options\":{\"step\":0.1},\"ui:rules\":[{required:true,message:'不能为空!'}],\"ui:defaultBeginValue\":0.1,\"ui:defaultEndValue\":0.2,\"ui:title\":\"范围参数组件\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"labelCol\":{span:6},\"wrapperCol\":{span:16}}},\"dateBetween\":{\"ui:widget\":\"between\",\"ui:type\":\"date\",\"ui:options\":{\"style\":{width:130}},\"ui:rules\":[{required:true,message:'不能为空!'}],\"ui:title\":\"范围参数组件\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"labelCol\":{span:6},\"wrapperCol\":{span:16}}}};var formData={\"name\":\"1212\",\"code\":\"1212121\",\"moduleId\":[\"3942a177-a52d-494b-bcd5-c3c1aba90b02\",\"779a4d68-9163-41ff-a9d1-19c6146ef470\",\"6bcf5fd6-3677-45ac-aa3b-7b016ef20f71\"]};var DynamicFormTest=function(_React$PureComponent){_inherits(DynamicFormTest,_React$PureComponent);function DynamicFormTest(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DynamicFormTest);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DynamicFormTest.__proto__||Object.getPrototypeOf(DynamicFormTest)).call.apply(_ref,[this].concat(args))),_this),_this.state={toggleParseSchema:true,schema:schema,uiSchema:uiSchema,formData:formData,error:'',data:''},_this.schema=JSON.stringify(schema),_this.uiSchema=JSON.stringify(uiSchema,function(key,val){if(typeof val==='function'){return val.toString();}return val;}),_this.formData=JSON.stringify(formData),_this.schemaChange=function(e){_this.schema=e.target.value;},_this.uiSchemaChange=function(e){_this.uiSchema=e.target.value;},_this.formDataChange=function(e){_this.formData=e.target.value;},_this.parseSchema=function(){if(_this.schema==''||_this.uiSchema==''||_this.formData==''){return;}try{var _schema=JSON.parse(_this.schema);var _uiSchema=JSON.parse(_this.uiSchema,function(k,v){if(typeof v===\"string\"&&v.indexOf(\"function\")>-1){var fun=new Function('return '+v);return fun();}return v;});var _formData=JSON.parse(_this.formData);var toggleParseSchema=_this.state.toggleParseSchema;_this.setState({toggleParseSchema:!toggleParseSchema,schema:_schema,uiSchema:_uiSchema,formData:_formData,error:''});}catch(e){_this.setState({error:e.toString()});}},_this.getFormData=function(data){_this.setState({data:JSON.stringify(data,null,4)});},_this.handleSubmit=function(){_this.editForm.handleSubmit();},_this.handleReset=function(){_this.editForm.handleReset();_this.setState({data:'',formData:{\"name\":\"\",\"code\":\"\",\"moduleId\":[]//不重置formData，表单reset后显示的是初始设置的默认值\n}});},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(DynamicFormTest,[{key:'render',value:function render(){var _this2=this;console.log(\"CommonFormTest render\");return __WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_tag___default.a,{color:'#87d068'},'Schema'),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(TextArea,{rows:15,defaultValue:JSON.stringify(this.state.schema,null,4),onChange:this.schemaChange})),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{style:{marginTop:10}},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_tag___default.a,{color:'#87d068'},'UiSchema'),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(TextArea,{rows:15,defaultValue:JSON.stringify(this.state.uiSchema,function(key,val){if(typeof val==='function'){return val.toString();}return val;},4),onChange:this.uiSchemaChange})),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{style:{marginTop:10}},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_tag___default.a,{color:'#87d068'},'FormData'),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(TextArea,{rows:15,defaultValue:JSON.stringify(formData,null,4),onChange:this.formDataChange})),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{style:{marginTop:10}},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_button___default.a,{type:'primary',onClick:this.parseSchema},'\\u91CD\\u65B0\\u89E3\\u6790')),this.state.error!=''?__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',null,this.state.error):null,__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_lib_divider___default.a,null),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__schema_DynamicForm__[\"a\" /* default */],{ref:function ref(instance){_this2.editForm=instance;},toggleParseSchema:this.state.toggleParseSchema,schema:this.state.schema,uiSchema:this.state.uiSchema,formData:this.state.formData,handleSubmit:this.getFormData}),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{style:{marginTop:10}},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_button___default.a,{type:'primary',onClick:this.handleSubmit},'\\u63D0\\u4EA4'),'\\xA0\\xA0\\xA0\\xA0',__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_button___default.a,{onClick:this.handleReset},'\\u6E05\\u7A7A')),this.state.data!=''?__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',null,this.state.data):null);}}]);return DynamicFormTest;}(__WEBPACK_IMPORTED_MODULE_8_react___default.a.PureComponent);/* harmony default export */ __webpack_exports__[\"a\"] = (DynamicFormTest);\n\n/***/ }),\n\n/***/ 1515:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dynamicFormSchemaUtil__ = __webpack_require__(1516);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var DynamicForm=function(_React$PureComponent){_inherits(DynamicForm,_React$PureComponent);function DynamicForm(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DynamicForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DynamicForm.__proto__||Object.getPrototypeOf(DynamicForm)).call.apply(_ref,[this].concat(args))),_this),_this.handleSubmit=function(){_this.formRef.props.form.validateFields(function(err,values){if(!err){// 还是要交给上层组件处理\n_this.props.handleSubmit(values);}});//const obj = this.formRef.props.form.getFieldsValue();\n},_this.handleReset=function(){_this.formRef.props.form.resetFields();},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(DynamicForm,[{key:'render',value:function render(){var _this2=this;console.log(\"DynamicForm render\");var _props=this.props,schema=_props.schema,uiSchema=_props.uiSchema,formData=_props.formData,style=_props.style,toggleParseSchema=_props.toggleParseSchema;// 根据当前的schema, 获取对应的表单组件\nvar FormComponent=__WEBPACK_IMPORTED_MODULE_1__dynamicFormSchemaUtil__[\"a\" /* default */].getForm(schema,uiSchema);return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{style:style},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormComponent,{toggleParseSchema:toggleParseSchema,schema:schema,uiSchema:uiSchema,formData:formData,wrappedComponentRef:function wrappedComponentRef(instance){_this2.formRef=instance;}}));}}]);return DynamicForm;}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PureComponent);/* harmony default export */ __webpack_exports__[\"a\"] = (DynamicForm);\n\n/***/ }),\n\n/***/ 1516:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_row_style__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_row_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_lib_row_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_row__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_row___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_lib_row__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_col_style__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_col_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_lib_col_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_col__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_col___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_lib_col__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_cascader_style__ = __webpack_require__(183);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_cascader_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_lib_cascader_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_cascader__ = __webpack_require__(184);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_cascader___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_lib_cascader__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_lib_switch_style__ = __webpack_require__(172);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_lib_switch_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_antd_lib_switch_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_switch__ = __webpack_require__(173);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_switch___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_antd_lib_switch__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_lib_select_style__ = __webpack_require__(107);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_lib_select_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_antd_lib_select_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_lib_select__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_lib_select___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_antd_lib_select__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_antd_lib_radio_style__ = __webpack_require__(115);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_antd_lib_radio_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_antd_lib_radio_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_antd_lib_radio__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_antd_lib_radio___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_antd_lib_radio__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_antd_lib_date_picker_style__ = __webpack_require__(185);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_antd_lib_date_picker_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_antd_lib_date_picker_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_antd_lib_date_picker__ = __webpack_require__(186);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_antd_lib_date_picker___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_antd_lib_date_picker__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_antd_lib_checkbox_style__ = __webpack_require__(116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_antd_lib_checkbox_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_antd_lib_checkbox_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_antd_lib_checkbox__ = __webpack_require__(69);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_antd_lib_checkbox___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15_antd_lib_checkbox__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_antd_lib_input_number_style__ = __webpack_require__(176);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_antd_lib_input_number_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16_antd_lib_input_number_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_antd_lib_input_number__ = __webpack_require__(177);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_antd_lib_input_number___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_17_antd_lib_input_number__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18_antd_lib_input_style__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18_antd_lib_input_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_18_antd_lib_input_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19_antd_lib_input__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19_antd_lib_input___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_19_antd_lib_input__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20_babel_runtime_regenerator__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_20_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21_antd_lib_form_style__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21_antd_lib_form_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_21_antd_lib_form_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22_antd_lib_form__ = __webpack_require__(105);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22_antd_lib_form___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_22_antd_lib_form__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_23_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24_create_react_class__ = __webpack_require__(111);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24_create_react_class___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_24_create_react_class__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25_api__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__FormRemoteDataUtil__ = __webpack_require__(306);\nfunction _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}var FormItem=__WEBPACK_IMPORTED_MODULE_22_antd_lib_form___default.a.Item;//暂存的JsxGenerator\nvar JsxGeneratorMap=new Map();//暂存表单组件, key是schema 的$id, value是对应的react组件\nvar FormMap=new Map();//缓存uiSchema,uiSchema中存在需动态获取的数据,获取后更新uiSchema并缓存\nvar UiSchemaMap=new Map();//缓存表单实例,key还是用schema 的$id+Index,组件实例化的时候存入，组件销毁的时候移除\nvar FormInstanceMap=new Map();//缓存表单实例maxIndex;\nvar FormInstanceIndexMap=new Map();var SchemaUtils={getForm:function getForm(schema,uiSchema){var id=schema[\"$id\"];if(FormMap.has(id)){return FormMap.get(id);}else{var newForm=this.createForm(id,schema,uiSchema);FormMap.set(id,newForm);return newForm;}},createForm:function createForm(id,schema,uiSchema){console.log(\"createDynamicForm\");var util=this;// 只能用传统的ES5的写法, 函数式(无状态)组件应该也可以, 但是需要生命周期相关方法\nvar tmpComponent=__WEBPACK_IMPORTED_MODULE_24_create_react_class___default()({getInitialState:function getInitialState(){var index=FormInstanceIndexMap.get(id);if(!index){index=1;}else{index++;}FormInstanceIndexMap.set(id,index);FormInstanceMap.set(id+\"-\"+index,this);return{inited:false,index:id+\"-\"+index,generateJsx:null};},componentWillMount:function componentWillMount(){console.log(\"tmpDynamicForm componentWillMount\");// 组件初始化时读取generator\nif(JsxGeneratorMap.has(id)){this.setState({generateJsx:JsxGeneratorMap.get(id)});return;}},componentDidMount:function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_20_babel_runtime_regenerator___default.a.mark(function _callee(){var generateJsx;return __WEBPACK_IMPORTED_MODULE_20_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!UiSchemaMap.has(id)){_context.next=2;break;}return _context.abrupt('return');case 2:util.mergeSchema(this.state.index,schema,uiSchema);_context.next=5;return util.getRemoteData(id,uiSchema);case 5:UiSchemaMap.set(id,true);generateJsx=util.parse(id,schema,uiSchema);//parse方法返回一个真正生成jsx结构的方法，调用的时候传入组件实例的index,从全局缓存获取组件实例传入(也可以直接传入组件实例)\n//JsxGeneratorMap.set(id, generateJsx);//永远不缓存\nthis.setState({inited:true,generateJsx:generateJsx});case 8:case'end':return _context.stop();}}},_callee,this);}));function componentDidMount(){return _ref.apply(this,arguments);}return componentDidMount;}(),componentDidUpdate:function componentDidUpdate(prevProps){var _this=this;//antd 表单项变更都会引起组件的变更，根据props判断是否为schema变更触发的，是则重新parse\nif(this.props.toggleParseSchema!=prevProps.toggleParseSchema){console.log('reParse');var propsSchema=this.props.schema;var propsUiSchema=this.props.uiSchema;util.mergeSchema(this.state.index,propsSchema,propsUiSchema);util.getRemoteData(id,propsUiSchema).then(function(){var generateJsx=util.parse(id,propsSchema,propsUiSchema);_this.setState({generateJsx:generateJsx});});}},componentWillUnmount:function componentWillUnmount(){FormInstanceMap.delete(this.state.index);console.log(FormInstanceMap.size);},render:function render(){console.log(\"tmpDynamicForm render\");var formData=this.props.formData;formData=formData||{};//组件实例key一层层往下传递\nreturn this.state.generateJsx?this.state.generateJsx(this.state.index,formData):null;}});// 注意要再用antd的create()方法包装下\nreturn __WEBPACK_IMPORTED_MODULE_22_antd_lib_form___default.a.create()(tmpComponent);},mergeSchema:function mergeSchema(formInstanceIndex,schema,uiSchema){var instance=FormInstanceMap.get(formInstanceIndex);Object.keys(uiSchema).forEach(function(key){var schemaProperty=schema[\"properties\"][key];var uiSchemaProperty=uiSchema[key];uiSchemaProperty.key=key;if(uiSchemaProperty[\"ui:rules\"]===undefined){uiSchemaProperty[\"ui:rules\"]=[];}if(uiSchemaProperty[\"ui:formItemConfig\"]===undefined){uiSchemaProperty[\"ui:formItemConfig\"]={};}//merge description \nif(uiSchemaProperty[\"ui:formItemConfig\"][\"extra\"]===undefined){uiSchemaProperty[\"ui:formItemConfig\"][\"extra\"]=uiSchemaProperty[\"ui:description\"];}if(uiSchemaProperty[\"ui:formItemConfig\"][\"extra\"]===undefined){uiSchemaProperty[\"ui:formItemConfig\"][\"extra\"]=schemaProperty[\"description\"];}//merge title\nif(uiSchemaProperty[\"ui:formItemConfig\"][\"label\"]===undefined){uiSchemaProperty[\"ui:formItemConfig\"][\"label\"]=uiSchemaProperty[\"ui:title\"];}if(uiSchemaProperty[\"ui:formItemConfig\"][\"label\"]===undefined){uiSchemaProperty[\"ui:formItemConfig\"][\"label\"]=schemaProperty[\"title\"];}//config labelCol \nif(uiSchemaProperty[\"ui:formItemConfig\"][\"labelCol\"]===undefined){uiSchemaProperty[\"ui:formItemConfig\"][\"labelCol\"]={span:8};}//config wrapperCol \nif(uiSchemaProperty[\"ui:formItemConfig\"][\"wrapperCol\"]===undefined){uiSchemaProperty[\"ui:formItemConfig\"][\"wrapperCol\"]={span:16};}//required\nif(uiSchemaProperty[\"ui:required\"]!==undefined){uiSchemaProperty[\"ui:rules\"].push({validator:function validator(rule,value,callback){var form=instance.props.form;var msg=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=uiSchemaProperty[\"ui:required\"][Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var required=_step.value;if(value&&!form.getFieldValue(required.name)){msg.push(required.message);}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}if(msg.length>0){callback(msg.join(\",\"));}else{callback();}}});}});},getRemoteData:function(){var _ref2=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_20_babel_runtime_regenerator___default.a.mark(function _callee2(id,uiSchema){var util,calls,result;return __WEBPACK_IMPORTED_MODULE_20_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"getRemoteData\");util=this;calls=[];Object.keys(uiSchema).forEach(function(key){var field=uiSchema[key];if(field[\"ui:remoteConfig\"]){switch(field[\"ui:widget\"]){case'select':calls.push(util.getCascaderRemoteData(id,field));break;case'radio':calls.push(util.getCascaderRemoteData(id,field));break;case'checkbox':calls.push(util.getCascaderRemoteData(id,field));break;case'multiSelect':calls.push(util.getCascaderRemoteData(id,field));break;case'between':calls.push(util.getCascaderRemoteData(id,field));break;case'cascader':calls.push(util.getCascaderRemoteData(id,field));break;default:calls.push(util.getCascaderRemoteData(id,field));}}});result=[];if(!(calls.length>0)){_context2.next=9;break;}_context2.next=8;return Promise.all([].concat(calls));case 8:result=_context2.sent;case 9:return _context2.abrupt('return',result);case 10:case'end':return _context2.stop();}}},_callee2,this);}));function getRemoteData(_x,_x2){return _ref2.apply(this,arguments);}return getRemoteData;}(),parse:function parse(id,schema,uiSchema){console.log(\"parse DynamicForm schema\");var items=[];var schemaProperties=schema[\"properties\"];var util=this;Object.keys(uiSchema).forEach(function(key){var field=uiSchema[key];var schemaProperty=schemaProperties[key];// 注意, 每个字段transform之后, 返回的也都是一个回调函数, 所以items其实是一个回调函数的集合\nswitch(field[\"ui:widget\"]){case'inputNumber':items.push(util.transformInputNumber(field,schemaProperty));break;case'checkbox':items.push(util.transformCheckbox(field,schemaProperty));break;case'datetime':items.push(util.transformDatetime(field,schemaProperty));break;case'radio':items.push(util.transformRadio(field,schemaProperty));break;case'select':items.push(util.transformSelect(field,schemaProperty));break;case'switch':items.push(util.transformSwitch(field,schemaProperty));break;case'cascader':items.push(util.transformCascader(field,schemaProperty));break;case'between':items.push(util.transformBetween(field,schemaProperty));break;default:items.push(util.transformNormal(field,schemaProperty));}});//调用parse返回的函数，也是被缓存的函数(其实是为了缓存items,一些构建form item的函数)，真正构建jsx是调用此函数，\nreturn function(formInstanceIndex,formData){var formItems=[];var getFieldDecorator=FormInstanceMap.get(formInstanceIndex).props.form.getFieldDecorator;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=items[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var item=_step2.value;formItems.push(item(getFieldDecorator,formData));}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return __WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_22_antd_lib_form___default.a,null,formItems);};},getCascaderRemoteData:function getCascaderRemoteData(id,field){var apiKey=field[\"ui:remoteConfig\"].apiKey;return new Promise(function(resolve,reject){__WEBPACK_IMPORTED_MODULE_25_api__[apiKey]().then(function(res){var data=res.data;data=field[\"ui:remoteConfig\"][\"hand\"](data);field[\"ui:options\"][\"options\"]=data;__WEBPACK_IMPORTED_MODULE_26__FormRemoteDataUtil__[\"a\" /* default */].addData(id+\"_\"+field.key,data);resolve(data);});});},transformInput:function transformInput(field,schemaProperty){return this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_19_antd_lib_input___default.a,field[\"ui:options\"]));},field);},transformInputNumber:function transformInputNumber(field,schemaProperty){return this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_17_antd_lib_input_number___default.a,field[\"ui:options\"]));},field);},transformCheckbox:function transformCheckbox(field,schemaProperty){return this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15_antd_lib_checkbox___default.a.Group,field[\"ui:options\"]));},field);},transformDatetime:function transformDatetime(field,schemaProperty){return this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_date_picker___default.a,field[\"ui:options\"]));},field);},transformRadio:function transformRadio(field,schemaProperty){return this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_antd_lib_radio___default.a.Group,field[\"ui:options\"]));},field);},transformSelect:function transformSelect(field,schemaProperty){var dataOptions=field[\"ui:dataOptions\"]||[];var options=[];var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=dataOptions[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var o=_step3.value;options.push(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_antd_lib_select___default.a.Option,{key:o.value,value:o.value,disabled:o.disabled},o.title));}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}return this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_antd_lib_select___default.a,field[\"ui:options\"],options));},field);},transformSwitch:function transformSwitch(field,schemaProperty){return this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"])),valuePropName:'checked'})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7_antd_lib_switch___default.a,field[\"ui:options\"]));},field);},transformBetween:function transformBetween(field,schemaProperty){var begin=void 0,end=void 0;switch(field[\"ui:type\"]){case'number':begin=function begin(getFieldDecorator,formData){return getFieldDecorator(field.key+'Begin',{initialValue:formData[field.key+'Begin']||field[\"ui:defaultBeginValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_17_antd_lib_input_number___default.a,field[\"ui:options\"]));};end=function end(getFieldDecorator,formData){return getFieldDecorator(field.key+'End',{initialValue:formData[field.key+'End']||field[\"ui:defaultEndValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_17_antd_lib_input_number___default.a,field[\"ui:options\"]));};return this.betweenFormItemWrapper(begin,end,field);default:begin=function begin(getFieldDecorator,formData){return getFieldDecorator(field.key+'Begin',{initialValue:formData[field.key+'Begin']||field[\"ui:defaultBeginValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_date_picker___default.a,field[\"ui:options\"]));};end=function end(getFieldDecorator,formData){return getFieldDecorator(field.key+'End',{initialValue:formData[field.key+'End']||field[\"ui:defaultEndValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_date_picker___default.a,field[\"ui:options\"]));};return this.betweenFormItemWrapper(begin,end,field);}},transformCascader:function transformCascader(field,schemaProperty){return this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultEndValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_cascader___default.a,field[\"ui:options\"]));},//函数作为参数传递\nfield);},transformNormal:function transformNormal(field,schemaProperty){switch(field[\"ui:widget\"]){case'input.textarea':return this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultEndValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_19_antd_lib_input___default.a.TextArea,field[\"ui:options\"]));},field);default:// 默认就是普通的输入框\nreturn this.formItemWrapper(function(getFieldDecorator,formData){return getFieldDecorator(field.key,{initialValue:formData[field.key]||field[\"ui:defaultEndValue\"],rules:[].concat(_toConsumableArray(field[\"ui:rules\"]))})(__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_19_antd_lib_input___default.a,field[\"ui:options\"]));},field);}},formItemWrapper:function formItemWrapper(formItem,field){return function(getFieldDecorator,formData){return __WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(FormItem,Object.assign({key:field.key},field[\"ui:formItemConfig\"]),formItem(getFieldDecorator,formData));};},betweenFormItemWrapper:function betweenFormItemWrapper(beginItem,endItem,field){var isNumber=field[\"ui:type\"]===\"number\";var sm=isNumber?8:11;var md=isNumber?6:8;var lg=isNumber?5:6;var xl=isNumber?3:5;return function(getFieldDecorator,formData){return __WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(FormItem,Object.assign({key:field.key},field[\"ui:formItemConfig\"]),__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_lib_row___default.a,null,__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_col___default.a,{xs:11,sm:sm,md:md,lg:lg,xl:xl},__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(FormItem,Object.assign({key:'begin'+field.key},field[\"ui:beginFormItemConfig\"]),beginItem(getFieldDecorator,formData))),__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_col___default.a,{span:1},__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement('span',{style:{display:'inline-block',width:'100%',textAlign:'center'}},'-')),__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_col___default.a,{xs:11,sm:sm,md:md,lg:lg,xl:xl},__WEBPACK_IMPORTED_MODULE_23_react___default.a.createElement(FormItem,Object.assign({key:'end'+field.key},field[\"ui:endFormItemConfig\"]),endItem(getFieldDecorator,formData)))));};}};/* harmony default export */ __webpack_exports__[\"a\"] = (SchemaUtils);\n\n/***/ }),\n\n/***/ 913:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_row_style__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_row_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_lib_row_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_row__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_row___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_lib_row__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_col_style__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_col_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_lib_col_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_col__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_col___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_lib_col__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_card_style__ = __webpack_require__(303);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_card_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_lib_card_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_card__ = __webpack_require__(304);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_card___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_lib_card__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__DynamicForm__ = __webpack_require__(1514);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var FormTest=function(_React$PureComponent){_inherits(FormTest,_React$PureComponent);function FormTest(){_classCallCheck(this,FormTest);return _possibleConstructorReturn(this,(FormTest.__proto__||Object.getPrototypeOf(FormTest)).apply(this,arguments));}_createClass(FormTest,[{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_lib_row___default.a,null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_col___default.a,null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_card___default.a,{style:{width:'100%'},title:'\\u52A8\\u6001\\u8868\\u5355'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7__DynamicForm__[\"a\" /* default */],null)))));}}]);return FormTest;}(__WEBPACK_IMPORTED_MODULE_6_react___default.a.PureComponent);/* harmony default export */ __webpack_exports__[\"default\"] = (FormTest);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/8.b704d1c5.chunk.js","import React from 'react';\nimport DynamicForm from '@/schema/DynamicForm';\n\nimport { Input, Tag, Button, Divider } from 'antd';\nconst { TextArea } = Input;\nconst schema = {\n    \"$id\": \"dynamic-edit-schema\",\n    \"title\": \"dynamic-edit-schema\",\n    \"description\": \"dynamic-edit-schema.\",\n    \"type\": \"object\",\n    \"required\": [\"moduleId\", \"name\", \"code\"],//可传给后端判断，暂时不使用此处配置检验前端表单,前端表单校验规则配置在uiSchema\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"moduleId\": {\n            \"type\": \"string\",\n            \"title\": \"模块Id\",\n            \"description\": \"相关菜单模块\"\n        },\n        \"module\": {\n            \"type\": \"string\",\n            \"title\": \"模块名称\",\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"title\": \"功能名称\",\n            \"maxLength\": 25,//可传给后端判断，暂时不使用此处配置检验前端表单,前端表单校验规则配置在uiSchema\n            \"minLength\": 1\n        },\n        \"code\": {\n            \"type\": \"string\",\n            \"title\": \"功能编码\",\n            \"maxLength\": 25,\n            \"minLength\": 1\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"title\": \"功能描述\",\n            \"maxLength\": 300,\n        },\n        \"int\": {\n            \"type\": \"integer\",\n            \"title\": \"整数组件\"\n        },\n        \"number\": {\n            \"type\": \"number\",\n            \"title\": \"浮点数组件\"\n        },\n        \"checkbox\": {\n            \"type\": \"array\",\n            \"title\": \"checkbox组件\"\n        },\n        \"password\": {\n            \"type\": \"string\",\n            \"title\": \"密码\"\n        },\n        \"datetime\": {\n            \"type\": \"string\",\n            \"title\": \"datetime组件\"\n        },\n        \"radio\": {\n            \"type\": \"string\",\n            \"title\": \"radio组件\"\n        },\n        \"select\": {\n            \"type\": \"array\",\n            \"title\": \"select组件\"\n        },\n        \"switch\": {\n            \"type\": \"boolean\",\n            \"title\": \"switch组件\"\n        },\n        \"numberBetweenBegin\": {\n            \"type\": \"number\",\n            \"title\": \"numberBetweenBegin\"\n        },\n        \"numberBetweenEnd\": {\n            \"type\": \"number\",\n            \"title\": \"numberBetweenEnd\"\n        },\n        \"dateBetweenBegin\": {\n            \"type\": \"string\",\n            \"title\": \"dateBetweenBegin\"\n        },\n        \"dateBetweenEnd\": {\n            \"type\": \"string\",\n            \"title\": \"dateBetweenEnd\"\n        }\n    }\n}\nconst uiSchema = {\n    \"name\": {\n        \"ui:widget\": \"input\",\n        \"ui:options\": {\n            \"type\": \"text\",\n            \"placeholder\": \"\"\n        },\n        \"ui:rules\": [\n            { required: true, message: '请输入功能名称' },\n            { max: 25, message: '最多输入25字符' }\n        ],//校验规则\n        \"ui:title\": \"功能名称\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            //\"extra\":\"121212\",//未设置取ui:description\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }//Form.Item 配置\n    },\n    \"code\": {\n        \"ui:widget\": \"input\",\n        \"ui:options\": {\n            \"type\": \"text\",\n            \"placeholder\": \"\"\n        },\n        \"ui:rules\": [\n            { required: true, message: '请输入功能编码' },\n            { max: 25, message: '最多输入25字符' }\n        ],//校验规则\n        \"ui:title\": \"功能编码\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            //\"extra\":\"121212\",//未设置取ui:description\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }//Form.Item 配置\n    },\n    \"description\": {\n        \"ui:widget\": \"input.textarea\",\n        \"ui:options\": {\n            \"style\": {\n                \"width\": 400,\n                \"height\": 200\n            },\n            \"autoSize\": { minRows: 2, maxRows: 6 },\n            \"placeholder\": \"\"\n        },\n        \"ui:rules\": [\n            { max: 300, message: '最多输入300字符!' }\n        ],//校验规则\n        \"ui:title\": \"功能描述\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            //\"extra\":\"121212\",//未设置取ui:description\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }//Form.Item 配置\n    },\n    \"moduleId\": {\n        \"ui:widget\": \"cascader\",//级联\n        \"ui:options\": {\n            \"fieldNames\": { label: 'title', value: 'id', children: 'children' },\n            \"options\": []\n        },//组件属性配置\n        \"ui:rules\": [{ required: true, message: '请选择模块!' }],//校验规则\n        \"ui:remoteConfig\": {\n            \"apiKey\": \"getAllMenu\",\n            \"hand\": function (data) {\n                return data;\n            },//数据处理函数\n        },\n        \"ui:title\": \"模块\",//未设置取schema 中定义的title\n        //\"ui:description\": \"请选择模块\",//未设置取 schema 中定义的description\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            //\"extra\":\"121212\",//未设置取ui:description\n            \"label\": \"模块\",//未设置取ui:title,\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }//Form.Item 配置\n    },\n    \"int\": {\n        \"ui:widget\": \"inputNumber\",\n        \"ui:options\": {\n        },\n        \"ui:rules\": [{ required: true, message: '不能为空!' }],\n        \"ui:defaultValue\": 0,\n        \"ui:title\": \"整数组件\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    },\n    \"number\": {\n        \"ui:widget\": \"inputNumber\",\n        \"ui:options\": {\n            \"step\": 0.1\n        },\n        \"ui:rules\": [{ required: true, message: '不能为空!' }],\n        \"ui:defaultValue\": 0.1,\n        \"ui:title\": \"浮点数组件\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    },\n    \"checkbox\": {\n        \"ui:widget\": \"checkbox\",\n        \"ui:options\": {\n            \"options\": [\n                { label: 'Apple', value: 'AppleValue' },\n                { label: 'Pear', value: 'PearValue' },\n                { label: 'Orange', value: 'OrangeValue', disabled: false },\n            ]\n        },\n        \"ui:rules\": [{ required: true, message: '不能为空!' }],\n        \"ui:defaultValue\": ['AppleValue'],\n        \"ui:title\": \"checkbox组件\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    },\n    \"password\": {\n        \"ui:widget\": \"input\",\n        \"ui:options\": {\n            \"type\": \"password\",\n            \"placeholder\": \"密码\"\n        },\n        \"ui:rules\": [{ required: true, message: '不能为空!' }],\n        \"ui:title\": \"密码\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    },\n    \"datetime\": {\n        \"ui:widget\": \"datetime\",\n        \"ui:options\": {\n            showTime: true,\n            format: \"YYYY-MM-DD HH:mm:ss\"\n        },\n        \"ui:rules\": [{ required: true, message: '不能为空!' }],\n        \"ui:title\": \"datetime\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    },\n    \"radio\": {\n        \"ui:widget\": \"radio\",\n        \"ui:options\": {\n            \"options\": [\n                { label: 'Apple', value: 'AppleValue' },\n                { label: 'Pear', value: 'PearValue' },\n                { label: 'Orange', value: 'OrangeValue', disabled: false },\n            ]\n        },\n        \"ui:rules\": [{ required: true, message: '不能为空!' }],\n        \"ui:defaultValue\": 'AppleValue',\n        \"ui:title\": \"radio组件\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    },\n    \"select\": {\n        \"ui:widget\": \"select\",\n        \"ui:options\": {\n\n        },\n        \"ui:rules\": [{ required: true, message: '不能为空!' }],\n        \"ui:dataOptions\": [\n            {\n                title: 'Jack',\n                value: 'jack'\n            },\n            {\n                title: 'Lucy',\n                value: 'lucy'\n            },\n            {\n                title: 'Tom',\n                value: 'tom',\n                disabled: true\n            }\n        ],\n        \"ui:defaultValue\": 'lucy',\n        \"ui:title\": \"select组件\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    },\n    \"switch\": {\n        \"ui:widget\": \"switch\",\n        \"ui:options\": {\n            checkedChildren: '激活',\n            unCheckedChildren: '锁定'\n        },\n        \"ui:defaultValue\": true,\n        \"ui:title\": \"switch\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    },\n    \"numberBetween\": {\n        \"ui:widget\": \"between\",\n        \"ui:type\": \"number\",\n        \"ui:options\": {\n            \"step\": 0.1\n        },\n        \"ui:rules\": [{ required: true, message: '不能为空!' }],\n        \"ui:defaultBeginValue\": 0.1,\n        \"ui:defaultEndValue\": 0.2,\n        \"ui:title\": \"范围参数组件\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    },\n    \"dateBetween\": {\n        \"ui:widget\": \"between\",\n        \"ui:type\": \"date\",\n        \"ui:options\": {\n            \"style\": { width: 130 }\n        },\n        \"ui:rules\": [{ required: true, message: '不能为空!' }],\n        \"ui:title\": \"范围参数组件\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }\n    }\n}\nconst formData = {\n    \"name\": \"1212\",\n    \"code\": \"1212121\",\n    \"moduleId\": [\n        \"3942a177-a52d-494b-bcd5-c3c1aba90b02\",\n        \"779a4d68-9163-41ff-a9d1-19c6146ef470\",\n        \"6bcf5fd6-3677-45ac-aa3b-7b016ef20f71\"\n    ]\n}\nclass DynamicFormTest extends React.PureComponent {\n    state = {\n        toggleParseSchema: true,\n        schema: schema,\n        uiSchema: uiSchema,\n        formData: formData,\n        error: '',\n        data: ''\n    }\n    schema = JSON.stringify(schema)\n    uiSchema = JSON.stringify(uiSchema, function (key, val) {\n        if (typeof val === 'function') {\n            return val.toString();\n        }\n        return val;\n    })\n    formData = JSON.stringify(formData)\n    schemaChange = (e) => {\n        this.schema = e.target.value;\n    }\n    uiSchemaChange = (e) => {\n        this.uiSchema = e.target.value;\n    }\n    formDataChange = (e) => {\n        this.formData = e.target.value;\n    }\n    parseSchema = () => {\n        if (this.schema == '' || this.uiSchema == '' || this.formData == '') {\n            return;\n        }\n        try {\n            let schema = JSON.parse(this.schema);\n            let uiSchema = JSON.parse(this.uiSchema, function (k, v) {\n                if (typeof v === \"string\" && v.indexOf(\"function\") > -1) {\n                    let fun = new Function('return ' + v);\n                    return fun()\n                }\n                return v;\n            });\n            let formData = JSON.parse(this.formData);\n            let toggleParseSchema = this.state.toggleParseSchema;\n            this.setState({\n                toggleParseSchema: !toggleParseSchema,\n                schema: schema,\n                uiSchema: uiSchema,\n                formData: formData,\n                error: ''\n            })\n        } catch (e) {\n            this.setState({\n                error: e.toString()\n            });\n        }\n    }\n    getFormData = (data) => {\n        this.setState({\n            data: JSON.stringify(data, null, 4)\n        })\n    }\n    handleSubmit = () => {\n        this.editForm.handleSubmit();\n    }\n    handleReset = () => {\n        this.editForm.handleReset()\n        this.setState({\n            data: '',\n            formData: {\n                \"name\": \"\",\n                \"code\": \"\",\n                \"moduleId\": []\n            }//不重置formData，表单reset后显示的是初始设置的默认值\n        })\n    }\n    render() {\n        console.log(\"CommonFormTest render\")\n        return (\n            <div>\n                <div>\n                    <Tag color=\"#87d068\">Schema</Tag>\n                    <TextArea rows={15} defaultValue={JSON.stringify(this.state.schema, null, 4)} onChange={this.schemaChange} />\n                </div>\n                <div style={{ marginTop: 10 }}>\n                    <Tag color=\"#87d068\">UiSchema</Tag>\n                    <TextArea rows={15} defaultValue={JSON.stringify(this.state.uiSchema, function (key, val) {\n                        if (typeof val === 'function') {\n                            return val.toString();\n                        }\n                        return val;\n                    }, 4)} onChange={this.uiSchemaChange} />\n                </div>\n                <div style={{ marginTop: 10 }}>\n                    <Tag color=\"#87d068\">FormData</Tag>\n                    <TextArea rows={15} defaultValue={JSON.stringify(formData, null, 4)} onChange={this.formDataChange} />\n                </div>\n                <div style={{ marginTop: 10 }}>\n                    <Button type=\"primary\" onClick={this.parseSchema}>重新解析</Button>\n                </div>\n                {this.state.error != '' ? <div>{this.state.error}</div> : null}\n                <Divider />\n                <DynamicForm\n                    ref={(instance) => { this.editForm = instance; }}\n                    toggleParseSchema={this.state.toggleParseSchema}\n                    schema={this.state.schema}\n                    uiSchema={this.state.uiSchema}\n                    formData={this.state.formData}\n                    handleSubmit={this.getFormData}\n                />\n                <div style={{ marginTop: 10 }}>\n                    <Button type=\"primary\" onClick={this.handleSubmit}>提交</Button>&nbsp;&nbsp;&nbsp;&nbsp;\n                    <Button onClick={this.handleReset}>清空</Button>\n                </div>\n                {this.state.data != '' ? <div>{this.state.data}</div> : null}\n            </div>\n        )\n    }\n}\nexport default DynamicFormTest;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/example/JsonForm/DynamicForm/DynamicForm.jsx","import React from 'react';\nimport util from './dynamicFormSchemaUtil';\nclass DynamicForm extends React.PureComponent {\n    handleSubmit = () => {\n        this.formRef.props.form.validateFields((err, values) => {\n            if (!err) {\n                // 还是要交给上层组件处理\n                this.props.handleSubmit(values);\n            }\n        });\n        //const obj = this.formRef.props.form.getFieldsValue();\n    }\n    handleReset = () => {\n        this.formRef.props.form.resetFields();\n    }\n    render() {\n        console.log(\"DynamicForm render\");\n        const { schema, uiSchema, formData, style, toggleParseSchema } = this.props;\n        // 根据当前的schema, 获取对应的表单组件\n        const FormComponent = util.getForm(schema, uiSchema);\n\n        return (\n            <div style={style}>\n                <FormComponent toggleParseSchema={toggleParseSchema} schema={schema} uiSchema={uiSchema} formData={formData} wrappedComponentRef={(instance) => { this.formRef = instance; }} />\n            </div>\n        );\n    }\n}\nexport default DynamicForm;\n\n\n// WEBPACK FOOTER //\n// ./src/schema/DynamicForm.js","import React from 'react';\nimport createClass from 'create-react-class';\nimport {\n    Form,\n    Input,\n    Row,\n    Col,\n    DatePicker,\n    InputNumber,\n    Checkbox,\n    Radio,\n    Select,\n    Switch,\n    Cascader\n} from 'antd';\nimport * as api from 'api';\nimport remoteDataUtil from './FormRemoteDataUtil';\n\nconst FormItem = Form.Item;\n\n//暂存的JsxGenerator\nconst JsxGeneratorMap = new Map();\n\n//暂存表单组件, key是schema 的$id, value是对应的react组件\nconst FormMap = new Map();\n\n//缓存uiSchema,uiSchema中存在需动态获取的数据,获取后更新uiSchema并缓存\nconst UiSchemaMap = new Map();\n\n//缓存表单实例,key还是用schema 的$id+Index,组件实例化的时候存入，组件销毁的时候移除\nconst FormInstanceMap = new Map();\n//缓存表单实例maxIndex;\nconst FormInstanceIndexMap = new Map();\n\nconst SchemaUtils = {\n    getForm(schema, uiSchema) {\n        const id = schema[\"$id\"];\n        if (FormMap.has(id)) {\n            return FormMap.get(id);\n        } else {\n            const newForm = this.createForm(id, schema, uiSchema);\n            FormMap.set(id, newForm);\n            return newForm;\n        }\n    },\n    createForm(id, schema, uiSchema) {\n        console.log(\"createDynamicForm\")\n        const util = this;\n        // 只能用传统的ES5的写法, 函数式(无状态)组件应该也可以, 但是需要生命周期相关方法\n        const tmpComponent = createClass({\n            getInitialState() {\n                let index = FormInstanceIndexMap.get(id);\n                if (!index) {\n                    index = 1;\n                } else {\n                    index++;\n                }\n                FormInstanceIndexMap.set(id, index);\n                FormInstanceMap.set(id + \"-\" + index, this);\n                return {\n                    inited: false,\n                    index: id + \"-\" + index,\n                    generateJsx: null\n                };\n            },\n            componentWillMount() {\n                console.log(\"tmpDynamicForm componentWillMount\");\n\n                // 组件初始化时读取generator\n                if (JsxGeneratorMap.has(id)) {\n                    this.setState({\n                        generateJsx: JsxGeneratorMap.get(id)\n                    })\n                    return;\n                }\n            },\n            async componentDidMount() {\n                if (UiSchemaMap.has(id)) {\n                    //jsx结构已经构建并缓存\n                    return;\n                }\n\n                util.mergeSchema(this.state.index, schema, uiSchema);\n\n                await util.getRemoteData(id, uiSchema);\n\n                UiSchemaMap.set(id, true);\n\n\n                const generateJsx = util.parse(id, schema, uiSchema);//parse方法返回一个真正生成jsx结构的方法，调用的时候传入组件实例的index,从全局缓存获取组件实例传入(也可以直接传入组件实例)\n\n                //JsxGeneratorMap.set(id, generateJsx);//永远不缓存\n\n                this.setState({\n                    inited: true,\n                    generateJsx: generateJsx\n                })\n\n            },\n            componentDidUpdate(prevProps) {\n                //antd 表单项变更都会引起组件的变更，根据props判断是否为schema变更触发的，是则重新parse\n                if (this.props.toggleParseSchema != prevProps.toggleParseSchema) {\n\n                    console.log('reParse')\n                    let propsSchema = this.props.schema;\n                    let propsUiSchema = this.props.uiSchema;\n                    util.mergeSchema(this.state.index, propsSchema, propsUiSchema);\n                    util.getRemoteData(id, propsUiSchema).then(() => {\n                        const generateJsx = util.parse(id, propsSchema, propsUiSchema);\n                        this.setState({\n                            generateJsx: generateJsx\n                        })\n                    });\n                }\n            },\n            componentWillUnmount() {\n                FormInstanceMap.delete(this.state.index);\n                console.log(FormInstanceMap.size)\n            },\n            render() {\n                console.log(\"tmpDynamicForm render\");\n                let formData = this.props.formData;\n                formData = formData || {}\n                //组件实例key一层层往下传递\n                return this.state.generateJsx ? this.state.generateJsx(this.state.index, formData) : null;\n            },\n        });\n        // 注意要再用antd的create()方法包装下\n        return Form.create()(tmpComponent);\n    },\n    mergeSchema(formInstanceIndex, schema, uiSchema) {\n        let instance = FormInstanceMap.get(formInstanceIndex);\n        Object.keys(uiSchema).forEach(function (key) {\n            let schemaProperty = schema[\"properties\"][key];\n            let uiSchemaProperty = uiSchema[key];\n            uiSchemaProperty.key = key;\n            if (uiSchemaProperty[\"ui:rules\"] === undefined) {\n                uiSchemaProperty[\"ui:rules\"] = []\n            }\n            if (uiSchemaProperty[\"ui:formItemConfig\"] === undefined) {\n                uiSchemaProperty[\"ui:formItemConfig\"] = {}\n            }\n            //merge description \n            if (uiSchemaProperty[\"ui:formItemConfig\"][\"extra\"] === undefined) {\n                uiSchemaProperty[\"ui:formItemConfig\"][\"extra\"] = uiSchemaProperty[\"ui:description\"]\n            }\n            if (uiSchemaProperty[\"ui:formItemConfig\"][\"extra\"] === undefined) {\n                uiSchemaProperty[\"ui:formItemConfig\"][\"extra\"] = schemaProperty[\"description\"];\n            }\n            //merge title\n            if (uiSchemaProperty[\"ui:formItemConfig\"][\"label\"] === undefined) {\n                uiSchemaProperty[\"ui:formItemConfig\"][\"label\"] = uiSchemaProperty[\"ui:title\"]\n            }\n            if (uiSchemaProperty[\"ui:formItemConfig\"][\"label\"] === undefined) {\n                uiSchemaProperty[\"ui:formItemConfig\"][\"label\"] = schemaProperty[\"title\"];\n            }\n            //config labelCol \n            if (uiSchemaProperty[\"ui:formItemConfig\"][\"labelCol\"] === undefined) {\n                uiSchemaProperty[\"ui:formItemConfig\"][\"labelCol\"] = { span: 8 };\n            }\n            //config wrapperCol \n            if (uiSchemaProperty[\"ui:formItemConfig\"][\"wrapperCol\"] === undefined) {\n                uiSchemaProperty[\"ui:formItemConfig\"][\"wrapperCol\"] = { span: 16 };\n            }\n            //required\n            if (uiSchemaProperty[\"ui:required\"] !== undefined) {\n                uiSchemaProperty[\"ui:rules\"].push({\n                    validator: (rule, value, callback) => {\n                        const form = instance.props.form;\n                        let msg = [];\n                        for (let required of uiSchemaProperty[\"ui:required\"]) {\n                            if (value && !form.getFieldValue(required.name)) {\n                                msg.push(required.message)\n                            }\n                        }\n                        if (msg.length > 0) {\n                            callback(msg.join(\",\"));\n                        } else {\n                            callback();\n                        }\n                    }\n                })\n            }\n\n        })\n    },\n    async getRemoteData(id, uiSchema) {\n        console.log(\"getRemoteData\")\n        const util = this;\n        let calls = [];\n        Object.keys(uiSchema).forEach(function (key) {\n            let field = uiSchema[key];\n            if (field[\"ui:remoteConfig\"]) {\n                switch (field[\"ui:widget\"]) {\n                    case 'select':\n                        calls.push(util.getCascaderRemoteData(id, field));\n                        break;\n                    case 'radio':\n                        calls.push(util.getCascaderRemoteData(id, field));\n                        break;\n                    case 'checkbox':\n                        calls.push(util.getCascaderRemoteData(id, field));\n                        break;\n                    case 'multiSelect':\n                        calls.push(util.getCascaderRemoteData(id, field));\n                        break;\n                    case 'between':\n                        calls.push(util.getCascaderRemoteData(id, field));\n                        break;\n                    case 'cascader':\n                        calls.push(util.getCascaderRemoteData(id, field));\n                        break;\n                    default:\n                        calls.push(util.getCascaderRemoteData(id, field));\n                }\n            }\n        });\n        let result = [];\n        if (calls.length > 0) {\n            result = await Promise.all([...calls]);\n        }\n        return result;\n\n    },\n    parse(id, schema, uiSchema) {\n        console.log(\"parse DynamicForm schema\")\n        let items = [];\n        let schemaProperties = schema[\"properties\"];\n        const util = this;\n        Object.keys(uiSchema).forEach(function (key) {\n            let field = uiSchema[key];\n            const schemaProperty = schemaProperties[key];\n            // 注意, 每个字段transform之后, 返回的也都是一个回调函数, 所以items其实是一个回调函数的集合\n            switch (field[\"ui:widget\"]) {\n                case 'inputNumber':\n                    items.push(util.transformInputNumber(field, schemaProperty));\n                    break;\n                case 'checkbox':\n                    items.push(util.transformCheckbox(field, schemaProperty));\n                    break;\n                case 'datetime':\n                    items.push(util.transformDatetime(field, schemaProperty));\n                    break;\n                case 'radio':\n                    items.push(util.transformRadio(field, schemaProperty));\n                    break;\n                case 'select':\n                    items.push(util.transformSelect(field, schemaProperty));\n                    break;\n                case 'switch':\n                    items.push(util.transformSwitch(field, schemaProperty));\n                    break;\n                case 'cascader':\n                    items.push(util.transformCascader(field, schemaProperty));\n                    break;\n                case 'between':\n                    items.push(util.transformBetween(field, schemaProperty));\n                    break;\n                default:\n                    items.push(util.transformNormal(field, schemaProperty));\n            }\n        });\n        //调用parse返回的函数，也是被缓存的函数(其实是为了缓存items,一些构建form item的函数)，真正构建jsx是调用此函数，\n        return (formInstanceIndex, formData) => {\n            const formItems = [];\n            const getFieldDecorator = FormInstanceMap.get(formInstanceIndex).props.form.getFieldDecorator;\n            for (const item of items) {\n                formItems.push(item(getFieldDecorator, formData));\n            }\n            return (<Form>\n                {formItems}\n            </Form>);\n        };\n    },\n    getCascaderRemoteData(id, field) {\n        const { apiKey } = field[\"ui:remoteConfig\"];\n        return new Promise(function (resolve, reject) {\n            api[apiKey]().then(res => {\n                let data = res.data;\n                data = field[\"ui:remoteConfig\"][\"hand\"](data);\n                field[\"ui:options\"][\"options\"] = data;\n                remoteDataUtil.addData(id + \"_\" + field.key, data)\n                resolve(data);\n            });\n        });\n    },\n    transformInput(field, schemaProperty) {\n        return this.formItemWrapper(\n            (getFieldDecorator, formData) =>\n                getFieldDecorator(field.key, {\n                    initialValue: formData[field.key] || field[\"ui:defaultValue\"],\n                    rules: [...field[\"ui:rules\"]]\n                })(<Input {...field[\"ui:options\"]} />)\n            , field);\n    },\n    transformInputNumber(field, schemaProperty) {\n        return this.formItemWrapper(\n            (getFieldDecorator, formData) =>\n                getFieldDecorator(field.key, {\n                    initialValue: formData[field.key] || field[\"ui:defaultValue\"],\n                    rules: [...field[\"ui:rules\"]]\n                })(<InputNumber {...field[\"ui:options\"]} />)\n            , field);\n    },\n    transformCheckbox(field, schemaProperty) {\n        return this.formItemWrapper(\n            (getFieldDecorator, formData) =>\n                getFieldDecorator(field.key, {\n                    initialValue: formData[field.key] || field[\"ui:defaultValue\"],\n                    rules: [...field[\"ui:rules\"]]\n                })(<Checkbox.Group {...field[\"ui:options\"]} />)\n            , field);\n    },\n    transformDatetime(field, schemaProperty) {\n        return this.formItemWrapper(\n            (getFieldDecorator, formData) =>\n                getFieldDecorator(field.key, {\n                    initialValue: formData[field.key] || field[\"ui:defaultValue\"],\n                    rules: [...field[\"ui:rules\"]]\n                })(<DatePicker {...field[\"ui:options\"]} />)\n            , field);\n    },\n    transformRadio(field, schemaProperty) {\n        return this.formItemWrapper(\n            (getFieldDecorator, formData) =>\n                getFieldDecorator(field.key, {\n                    initialValue: formData[field.key] || field[\"ui:defaultValue\"],\n                    rules: [...field[\"ui:rules\"]]\n                })(<Radio.Group {...field[\"ui:options\"]} />)\n            , field);\n    },\n    transformSelect(field, schemaProperty) {\n        let dataOptions = field[\"ui:dataOptions\"] || []\n        let options = [];\n        for (let o of dataOptions) {\n            options.push(<Select.Option key={o.value} value={o.value} disabled={o.disabled}>{o.title}</Select.Option>)\n        }\n        return this.formItemWrapper(\n            (getFieldDecorator, formData) =>\n                getFieldDecorator(field.key, {\n                    initialValue: formData[field.key] || field[\"ui:defaultValue\"],\n                    rules: [...field[\"ui:rules\"]]\n                })(<Select {...field[\"ui:options\"]}>\n                    {options}\n                </Select>)\n            , field);\n    },\n    transformSwitch(field, schemaProperty) {\n        return this.formItemWrapper(\n            (getFieldDecorator, formData) =>\n                getFieldDecorator(field.key, {\n                    initialValue: formData[field.key] || field[\"ui:defaultValue\"],\n                    rules: [...field[\"ui:rules\"]],\n                    valuePropName: 'checked'\n                })(<Switch {...field[\"ui:options\"]} />)\n            , field);\n    },\n    transformBetween(field, schemaProperty) {\n        let begin, end;\n        switch (field[\"ui:type\"]) {\n            case 'number':\n                begin = (getFieldDecorator, formData) => {\n                    return (\n                        getFieldDecorator(`${field.key}Begin`, {\n                            initialValue: formData[field.key + 'Begin'] || field[\"ui:defaultBeginValue\"],\n                            rules: [...field[\"ui:rules\"]]\n                        })(<InputNumber {...field[\"ui:options\"]} />)\n                    );\n                };\n                end = (getFieldDecorator, formData) => {\n                    return (\n                        getFieldDecorator(`${field.key}End`, {\n                            initialValue: formData[field.key + 'End'] || field[\"ui:defaultEndValue\"],\n                            rules: [...field[\"ui:rules\"]]\n                        })(<InputNumber {...field[\"ui:options\"]} />)\n                    );\n                };\n                return this.betweenFormItemWrapper(begin, end, field);\n            default:\n                begin = (getFieldDecorator, formData) => {\n                    return (\n                        getFieldDecorator(`${field.key}Begin`, {\n                            initialValue: formData[field.key + 'Begin'] || field[\"ui:defaultBeginValue\"],\n                            rules: [...field[\"ui:rules\"]]\n                        })(<DatePicker {...field[\"ui:options\"]} />)\n                    );\n                };\n                end = (getFieldDecorator, formData) => {\n                    return (\n                        getFieldDecorator(`${field.key}End`, {\n                            initialValue: formData[field.key + 'End'] || field[\"ui:defaultEndValue\"],\n                            rules: [...field[\"ui:rules\"]]\n                        })(<DatePicker {...field[\"ui:options\"]} />)\n                    );\n                };\n                return this.betweenFormItemWrapper(begin, end, field);\n        }\n    },\n    transformCascader(field, schemaProperty) {\n        return this.formItemWrapper(\n            (getFieldDecorator, formData) =>\n                getFieldDecorator(field.key, {\n                    initialValue: formData[field.key] || field[\"ui:defaultEndValue\"],\n                    rules: [...field[\"ui:rules\"]]\n                })(<Cascader {...field[\"ui:options\"]} />),//函数作为参数传递\n            field);\n    },\n    transformNormal(field, schemaProperty) {\n        switch (field[\"ui:widget\"]) {\n            case 'input.textarea':\n                return this.formItemWrapper(\n                    (getFieldDecorator, formData) =>\n                        getFieldDecorator(field.key,\n                            {\n                                initialValue: formData[field.key] || field[\"ui:defaultEndValue\"],\n                                rules: [...field[\"ui:rules\"]]\n                            })(<Input.TextArea {...field[\"ui:options\"]} />)\n                    , field);\n            default:  // 默认就是普通的输入框\n                return this.formItemWrapper(\n                    (getFieldDecorator, formData) =>\n                        getFieldDecorator(field.key,\n                            {\n                                initialValue: formData[field.key] || field[\"ui:defaultEndValue\"],\n                                rules: [...field[\"ui:rules\"]]\n                            })(<Input {...field[\"ui:options\"]} />)\n                    , field);\n        }\n    },\n    formItemWrapper(formItem, field) {\n        return (getFieldDecorator, formData) => (\n            <FormItem key={field.key} {...field[\"ui:formItemConfig\"]}>\n                {formItem(getFieldDecorator, formData)}\n            </FormItem>\n        );\n    },\n    betweenFormItemWrapper(beginItem, endItem, field) {\n        let isNumber = field[\"ui:type\"] === \"number\";\n        let sm = isNumber ? 8 : 11;\n        let md = isNumber ? 6 : 8;\n        let lg = isNumber ? 5 : 6;\n        let xl = isNumber ? 3 : 5;\n        return (getFieldDecorator, formData) => (\n            <FormItem\n                key={field.key}\n                {...field[\"ui:formItemConfig\"]}\n            >\n                <Row>\n                    <Col xs={11} sm={sm} md={md} lg={lg} xl={xl}>\n                        <FormItem\n                            key={'begin' + field.key}\n                            {...field[\"ui:beginFormItemConfig\"]}\n                        >\n                            {beginItem(getFieldDecorator, formData)}\n                        </FormItem>\n                    </Col>\n                    <Col span={1}>\n                        <span style={{ display: 'inline-block', width: '100%', textAlign: 'center' }}>\n                            -\n                        </span>\n                    </Col>\n                    <Col xs={11} sm={sm} md={md} lg={lg} xl={xl} >\n                        <FormItem\n                            key={'end' + field.key}\n                            {...field[\"ui:endFormItemConfig\"]}\n                        >\n                            {endItem(getFieldDecorator, formData)}\n                        </FormItem>\n                    </Col>\n                </Row>\n            </FormItem>\n        )\n    }\n}\nexport default SchemaUtils;\n\n\n// WEBPACK FOOTER //\n// ./src/schema/dynamicFormSchemaUtil.js","import React from 'react';\nimport { Card, Row, Col } from 'antd';\nimport DynamicForm from './DynamicForm';\n\nclass FormTest extends React.PureComponent {\n\n    render() {\n        return (\n            <div>\n                <Row>\n                    <Col>\n                        <Card style={{ width: '100%' }} title='动态表单'>\n                            <DynamicForm />\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        ) \n    }\n}\nexport default FormTest;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/example/JsonForm/DynamicForm/index.jsx"],"sourceRoot":""}