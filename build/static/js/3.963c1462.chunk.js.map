{"version":3,"sources":["../static/js/3.963c1462.chunk.js","schema/function/index.js","schema/function/searchSchema.js","schema/function/searchUiSchema.js","schema/function/editSchema.js","schema/function/editUiSchema.js","pages/Function.jsx"],"names":["webpackJsonp","1113","module","__webpack_exports__","__webpack_require__","i","searchSchema","searchUiSchema","editSchema","editUiSchema","1114","1115","1116","1117","required","message","max","span","minRows","maxRows","label","value","children","data","891","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","error","done","then","err","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style__","__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal__","n","__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default","__WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_table__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_table___default","__WEBPACK_IMPORTED_MODULE_4_antd_lib_notification_style__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_notification__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_notification___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_7_antd_lib_popconfirm_style__","__WEBPACK_IMPORTED_MODULE_8_antd_lib_popconfirm__","__WEBPACK_IMPORTED_MODULE_8_antd_lib_popconfirm___default","__WEBPACK_IMPORTED_MODULE_9_antd_lib_divider_style__","__WEBPACK_IMPORTED_MODULE_10_antd_lib_divider__","__WEBPACK_IMPORTED_MODULE_10_antd_lib_divider___default","__WEBPACK_IMPORTED_MODULE_11_antd_lib_button_style__","__WEBPACK_IMPORTED_MODULE_12_antd_lib_button__","__WEBPACK_IMPORTED_MODULE_12_antd_lib_button___default","__WEBPACK_IMPORTED_MODULE_13_react__","__WEBPACK_IMPORTED_MODULE_13_react___default","__WEBPACK_IMPORTED_MODULE_14_api__","__WEBPACK_IMPORTED_MODULE_15__schema_SearchForm__","__WEBPACK_IMPORTED_MODULE_16__schema_CommonForm__","__WEBPACK_IMPORTED_MODULE_17__schema_function__","__WEBPACK_IMPORTED_MODULE_18_permission__","__WEBPACK_IMPORTED_MODULE_19__schema_FormRemoteDataUtil__","__WEBPACK_IMPORTED_MODULE_20__utils_util__","_createClass","defineProperties","target","props","length","descriptor","protoProps","staticProps","style","display","Function","state","filter","name","code","expand","selectedRowKeys","pagedList","pagination","current","pageSize","showQuickJumper","showSizeChanger","showTotal","total","sorter","field","order","loading","editModalVisible","columns","title","dataIndex","fixed","width","render","text","record","type","onClick","editFunction","onConfirm","delFunction","id","editFormData","fetch","a","query","setState","getFunctionPagedList","dataRes","totalCount","rows","handleTableChange","filters","pager","pageIndex","sortBy","descending","handleSearch","handleReset","onSelectChange","success","placement","refresh","batchDelFunction","delFunctions","ids","JSON","stringify","map","s","addFunction","menuList","formRemoteDataUtil","getData","schema","openMenuList","util","openTreeData","menuWithParent","getTreeEleWithParent","moduleId","saveFunction","formData","menu","getTreeEleByPropertyValue","editModalOnOk","editFunctionForm","handleSubmit","editModalOnCancel","console","log","rowSelection","onChange","hasSelected","uiSchema","marginBottom","permission","icon","disabled","rowKey","dataSource","scroll","x","bordered","visible","cancelText","okText","onCancel","onOk","destroyOnClose","ref","React","PureComponent"],"mappings":"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","file":"static/js/3.963c1462.chunk.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 1113:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__searchSchema__ = __webpack_require__(1114);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__searchUiSchema__ = __webpack_require__(1115);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__editSchema__ = __webpack_require__(1116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__editUiSchema__ = __webpack_require__(1117);\n/* harmony default export */ __webpack_exports__[\"a\"] = ({searchSchema:__WEBPACK_IMPORTED_MODULE_0__searchSchema__[\"a\" /* default */],searchUiSchema:__WEBPACK_IMPORTED_MODULE_1__searchUiSchema__[\"a\" /* default */],editSchema:__WEBPACK_IMPORTED_MODULE_2__editSchema__[\"a\" /* default */],editUiSchema:__WEBPACK_IMPORTED_MODULE_3__editUiSchema__[\"a\" /* default */]});\n\n/***/ }),\n\n/***/ 1114:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\"$id\":\"function-search-schema\",\"title\":\"function-search-schema\",\"description\":\"function-search-schema.\",\"type\":\"object\",\"required\":[],\"properties\":{\"module\":{\"type\":\"string\",\"title\":\"模块名称\"},\"name\":{\"type\":\"string\",\"title\":\"功能名称\"},\"code\":{\"type\":\"string\",\"title\":\"功能编码\"}}});\n\n/***/ }),\n\n/***/ 1115:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\"module\":{\"ui:widget\":\"input\",\"ui:options\":{\"type\":\"text\",\"placeholder\":\"模块模糊查询\"},//组件属性配置\n\"ui:title\":\"模块名称\",//覆盖schema 中定义的title\n\"ui:description\":\"\"},\"name\":{\"ui:widget\":\"input\",\"ui:options\":{\"type\":\"text\",\"placeholder\":\"功能模糊查询\"},\"ui:title\":\"功能名称\",\"ui:description\":\"\"},\"code\":{\"ui:widget\":\"input\",\"ui:options\":{\"type\":\"text\",\"placeholder\":\"编码模糊查询\"},\"ui:title\":\"模块编码\",\"ui:description\":\"\"}});\n\n/***/ }),\n\n/***/ 1116:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\"$id\":\"function-edit-schema\",\"title\":\"function-edit-schema\",\"description\":\"function-edit-schema.\",\"type\":\"object\",\"required\":[\"moduleId\",\"name\",\"code\"],//可传给后端判断，暂时不使用此处配置检验前端表单,前端表单校验规则配置在uiSchema\n\"properties\":{\"id\":{\"type\":\"string\"},\"moduleId\":{\"type\":\"string\",\"title\":\"模块Id\",\"description\":\"相关菜单模块\"},\"module\":{\"type\":\"string\",\"title\":\"模块名称\"},\"name\":{\"type\":\"string\",\"title\":\"功能名称\",\"maxLength\":25,//可传给后端判断，暂时不使用此处配置检验前端表单,前端表单校验规则配置在uiSchema\n\"minLength\":1},\"code\":{\"type\":\"string\",\"title\":\"功能编码\",\"maxLength\":25,\"minLength\":1},\"description\":{\"type\":\"string\",\"title\":\"功能描述\",\"maxLength\":300}}});\n\n/***/ }),\n\n/***/ 1117:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\"name\":{\"ui:widget\":\"input\",\"ui:options\":{\"type\":\"text\",\"placeholder\":\"\"},\"ui:rules\":[{required:true,message:'请输入功能名称'},{max:25,message:'最多输入25字符'}],//校验规则\n\"ui:title\":\"功能名称\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,//\"extra\":\"121212\",//未设置取ui:description\n\"labelCol\":{span:6},\"wrapperCol\":{span:16}//Form.Item 配置\n}},\"code\":{\"ui:widget\":\"input\",\"ui:options\":{\"type\":\"text\",\"placeholder\":\"\"},\"ui:rules\":[{required:true,message:'请输入功能编码'},{max:25,message:'最多输入25字符'}],//校验规则\n\"ui:title\":\"功能编码\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,//\"extra\":\"121212\",//未设置取ui:description\n\"labelCol\":{span:6},\"wrapperCol\":{span:16}//Form.Item 配置\n}},\"description\":{\"ui:widget\":\"input.textarea\",\"ui:options\":{\"style\":{\"width\":400,\"height\":200},\"autoSize\":{minRows:2,maxRows:6},\"placeholder\":\"\"},\"ui:rules\":[{max:300,message:'最多输入300字符!'}],//校验规则\n\"ui:title\":\"功能描述\",\"ui:description\":\"\",\"ui:formItemConfig\":{\"hasFeedback\":true,//\"extra\":\"121212\",//未设置取ui:description\n\"labelCol\":{span:6},\"wrapperCol\":{span:16}//Form.Item 配置\n}},\"moduleId\":{\"ui:widget\":\"cascader\",//级联\n\"ui:options\":{\"fieldNames\":{label:'title',value:'id',children:'children'},\"options\":[]},//组件属性配置\n\"ui:rules\":[{required:true,message:'请选择模块!'}],//校验规则\n\"ui:remoteConfig\":{\"apiKey\":\"getAllMenu\",\"hand\":function hand(data){return data;}//数据处理函数\n},\"ui:title\":\"模块\",//未设置取schema 中定义的title\n//\"ui:description\": \"请选择模块\",//未设置取 schema 中定义的description\n\"ui:formItemConfig\":{\"hasFeedback\":true,//\"extra\":\"121212\",//未设置取ui:description\n\"label\":\"模块\",//未设置取ui:title,\n\"labelCol\":{span:6},\"wrapperCol\":{span:16}//Form.Item 配置\n}}});\n\n/***/ }),\n\n/***/ 891:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style__ = __webpack_require__(875);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_modal__ = __webpack_require__(876);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style__ = __webpack_require__(867);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_table__ = __webpack_require__(868);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_table___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_lib_table__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_notification_style__ = __webpack_require__(873);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_notification_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_lib_notification_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_notification__ = __webpack_require__(874);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_notification___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_lib_notification__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_popconfirm_style__ = __webpack_require__(877);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_popconfirm_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_antd_lib_popconfirm_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_lib_popconfirm__ = __webpack_require__(878);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_lib_popconfirm___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_antd_lib_popconfirm__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_lib_divider_style__ = __webpack_require__(869);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_lib_divider_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_antd_lib_divider_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_antd_lib_divider__ = __webpack_require__(870);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_antd_lib_divider___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_antd_lib_divider__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_antd_lib_button_style__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_antd_lib_button_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_antd_lib_button_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_antd_lib_button__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_antd_lib_button___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_antd_lib_button__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_api__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__schema_SearchForm__ = __webpack_require__(871);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__schema_CommonForm__ = __webpack_require__(879);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__schema_function__ = __webpack_require__(1113);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18_permission__ = __webpack_require__(882);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__schema_FormRemoteDataUtil__ = __webpack_require__(306);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__utils_util__ = __webpack_require__(175);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var style={display:'none'};var Function=function(_React$PureComponent){_inherits(Function,_React$PureComponent);function Function(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,Function);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Function.__proto__||Object.getPrototypeOf(Function)).call.apply(_ref,[this].concat(args))),_this),_this.state={filter:{module:\"\",name:\"\",code:\"\"},expand:true,selectedRowKeys:[],pagedList:[],pagination:{current:1,pageSize:10,showQuickJumper:true,showSizeChanger:true,showTotal:function showTotal(total){return'Total '+total+' items';}},sorter:{field:'',order:''},loading:false,editModalVisible:false},_this.columns=[{title:'模块名称',dataIndex:'module',sorter:true},{title:'功能名称',dataIndex:'name',sorter:true},{title:'功能编码',dataIndex:'code',sorter:true},{title:'操作',dataIndex:'id',fixed:'right',width:180,render:function render(text,record){return __WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12_antd_lib_button___default.a,{type:'link',onClick:function onClick(){return _this.editFunction(record);}},'\\u7F16\\u8F91'),__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10_antd_lib_divider___default.a,{type:'vertical'}),__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_antd_lib_popconfirm___default.a,{title:'\\u786E\\u5B9A\\u5220\\u9664?',onConfirm:function onConfirm(){return _this.delFunction(record.id);}},__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12_antd_lib_button___default.a,{type:'link'},'\\u5220\\u9664')));}}],_this.editFormData={},_this.fetch=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.mark(function _callee(){var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var dataRes,data,pagination;return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading:true});_context.next=3;return Object(__WEBPACK_IMPORTED_MODULE_14_api__[\"getFunctionPagedList\"])(query);case 3:dataRes=_context.sent;data=dataRes.data;pagination=Object.assign({},_this.state.pagination);pagination.total=data.totalCount;_this.setState({loading:false,pagedList:data.rows,pagination:pagination});case 8:case'end':return _context.stop();}}},_callee,_this2);})),_this.handleTableChange=function(pagination,filters,sorter){var pager=Object.assign({},_this.state.pagination);pager.current=pagination.current;pager.pageSize=pagination.pageSize;_this.setState({pagination:pager,sorter:{field:sorter.field,order:sorter.order}});var query={pageIndex:pager.current,pageSize:pager.pageSize,sortBy:sorter.field,descending:sorter.order==='descend',filter:_this.state.filter};_this.fetch(query);},_this.handleSearch=function(filter){var pager=Object.assign({},_this.state.pagination);pager.current=1;//查询回到第一页\n_this.setState({filter:filter,pagination:pager});var query={pageIndex:1,pageSize:_this.state.pagination.pageSize,sortBy:_this.state.sorter.field,descending:_this.state.sorter.order==='descend',filter:filter};_this.fetch(query);},_this.handleReset=function(){_this.setState({filter:{}});},_this.onSelectChange=function(selectedRowKeys){_this.setState({selectedRowKeys:selectedRowKeys});},_this.delFunction=function(){var _ref3=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.mark(function _callee2(id){return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Object(__WEBPACK_IMPORTED_MODULE_14_api__[\"delFunction\"])({id:id});case 3:__WEBPACK_IMPORTED_MODULE_5_antd_lib_notification___default.a.success({placement:'bottomLeft bottomRight',message:'删除成功'});_context2.next=8;break;case 6:_context2.prev=6;_context2.t0=_context2['catch'](0);case 8:_this.refresh();case 9:case'end':return _context2.stop();}}},_callee2,_this2,[[0,6]]);}));return function(_x2){return _ref3.apply(this,arguments);};}(),_this.batchDelFunction=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.mark(function _callee3(){return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Object(__WEBPACK_IMPORTED_MODULE_14_api__[\"delFunctions\"])({ids:JSON.stringify(_this.state.selectedRowKeys.map(function(s){return s;}))});case 3:_this.setState({selectedRowKeys:[]});__WEBPACK_IMPORTED_MODULE_5_antd_lib_notification___default.a.success({placement:'bottomLeft bottomRight',message:'删除成功'});_context3.next=9;break;case 7:_context3.prev=7;_context3.t0=_context3['catch'](0);case 9:_this.refresh();case 10:case'end':return _context3.stop();}}},_callee3,_this2,[[0,7]]);})),_this.addFunction=function(){_this.editFormData={};_this.setState({editModalVisible:true});},_this.editFunction=function(record){var menuList=__WEBPACK_IMPORTED_MODULE_19__schema_FormRemoteDataUtil__[\"a\" /* default */].getData(__WEBPACK_IMPORTED_MODULE_17__schema_function__[\"a\" /* default */].editSchema[\"$id\"]+\"_moduleId\");var openMenuList=__WEBPACK_IMPORTED_MODULE_20__utils_util__[\"a\" /* default */].openTreeData(menuList);var menuWithParent=__WEBPACK_IMPORTED_MODULE_20__utils_util__[\"a\" /* default */].getTreeEleWithParent(record.moduleId,openMenuList);var moduleId=menuWithParent.map(function(s){return s.id;});_this.editFormData=Object.assign({},record,{moduleId:moduleId});_this.setState({editModalVisible:true});},_this.saveFunction=function(){var _ref5=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.mark(function _callee4(data){var formData,menuList,menu;return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:formData=Object.assign({},_this.editFormData,data);menuList=__WEBPACK_IMPORTED_MODULE_19__schema_FormRemoteDataUtil__[\"a\" /* default */].getData(__WEBPACK_IMPORTED_MODULE_17__schema_function__[\"a\" /* default */].editSchema[\"$id\"]+\"_moduleId\");formData.moduleId=formData.moduleId[formData.moduleId.length-1];menu=__WEBPACK_IMPORTED_MODULE_20__utils_util__[\"a\" /* default */].getTreeEleByPropertyValue(formData.moduleId,\"id\",menuList);formData.module=menu.title;_context4.prev=5;_context4.next=8;return Object(__WEBPACK_IMPORTED_MODULE_14_api__[\"saveFunction\"])(formData);case 8:_this.setState({editModalVisible:false});__WEBPACK_IMPORTED_MODULE_5_antd_lib_notification___default.a.success({placement:'bottomLeft bottomRight',message:'保存成功'});_context4.next=14;break;case 12:_context4.prev=12;_context4.t0=_context4['catch'](5);case 14:_this.refresh();case 15:case'end':return _context4.stop();}}},_callee4,_this2,[[5,12]]);}));return function(_x3){return _ref5.apply(this,arguments);};}(),_this.editModalOnOk=function(){//不直接调用saveFunction，是因为form组件内部会先校验表单，通过才会调用通过props传进去的saveFunction\n_this.editFunctionForm.handleSubmit();},_this.editModalOnCancel=function(){_this.setState({editModalVisible:false});},_this.refresh=function(){var query={pageIndex:_this.state.pagination.current,pageSize:_this.state.pagination.pageSize,sortBy:_this.state.sorter.field,descending:_this.state.sorter.order==='descend',filter:_this.state.filter};_this.fetch(query);},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(Function,[{key:'componentDidMount',value:function componentDidMount(){this.fetch({pageIndex:this.state.pagination.current,pageSize:this.state.pagination.pageSize,filter:this.state.filter});}},{key:'render',value:function render(){var _this3=this;console.log(\"Function render\");var selectedRowKeys=this.state.selectedRowKeys;var rowSelection={selectedRowKeys:selectedRowKeys,onChange:this.onSelectChange};var hasSelected=selectedRowKeys.length>0;return __WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15__schema_SearchForm__[\"a\" /* default */],{schema:__WEBPACK_IMPORTED_MODULE_17__schema_function__[\"a\" /* default */].searchSchema,uiSchema:__WEBPACK_IMPORTED_MODULE_17__schema_function__[\"a\" /* default */].searchUiSchema,handleSubmit:this.handleSearch,handleReset:this.handleReset}),__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10_antd_lib_divider___default.a,null),__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement('div',{style:{marginBottom:16}},__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_18_permission__[\"a\" /* default */],{permission:[\"function_edit\"]},__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12_antd_lib_button___default.a,{type:'primary',icon:'plus-square-o',onClick:this.addFunction},'\\u65B0\\u589E')),__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10_antd_lib_divider___default.a,{type:'vertical'}),__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_18_permission__[\"a\" /* default */],{permission:[\"function_del\"]},__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_antd_lib_popconfirm___default.a,{title:'\\u786E\\u5B9A\\u5220\\u9664?',onConfirm:this.batchDelFunction},__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12_antd_lib_button___default.a,{type:'danger',disabled:!hasSelected,icon:'delete'},'\\u5220\\u9664')))),__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_table___default.a,{rowSelection:rowSelection,columns:this.columns,rowKey:function rowKey(record){return record.id;},dataSource:this.state.pagedList,pagination:this.state.pagination,loading:this.state.loading,onChange:this.handleTableChange,scroll:{x:768},bordered:true}),__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default.a,{visible:this.state.editModalVisible,cancelText:'\\u5173\\u95ED',okText:'\\u63D0\\u4EA4',title:this.editFormData.id?'编辑功能':'新增功能',onCancel:this.editModalOnCancel,onOk:this.editModalOnOk,destroyOnClose:true},__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_16__schema_CommonForm__[\"a\" /* default */],{ref:function ref(instance){_this3.editFunctionForm=instance;},schema:__WEBPACK_IMPORTED_MODULE_17__schema_function__[\"a\" /* default */].editSchema,uiSchema:__WEBPACK_IMPORTED_MODULE_17__schema_function__[\"a\" /* default */].editUiSchema,formData:this.editFormData,handleSubmit:this.saveFunction})),__WEBPACK_IMPORTED_MODULE_13_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_16__schema_CommonForm__[\"a\" /* default */],{schema:__WEBPACK_IMPORTED_MODULE_17__schema_function__[\"a\" /* default */].editSchema,uiSchema:__WEBPACK_IMPORTED_MODULE_17__schema_function__[\"a\" /* default */].editUiSchema,style:style}));}}]);return Function;}(__WEBPACK_IMPORTED_MODULE_13_react___default.a.PureComponent);/* harmony default export */ __webpack_exports__[\"default\"] = (Function);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.963c1462.chunk.js","import searchSchema from './searchSchema';\nimport searchUiSchema from './searchUiSchema';\nimport editSchema from './editSchema';\nimport editUiSchema from './editUiSchema';\nexport default {\n    searchSchema,\n    searchUiSchema,\n    editSchema,\n    editUiSchema\n}\n\n\n// WEBPACK FOOTER //\n// ./src/schema/function/index.js","export default {\n    \"$id\": \"function-search-schema\",\n    \"title\": \"function-search-schema\",\n    \"description\": \"function-search-schema.\",\n    \"type\": \"object\",\n    \"required\": [],\n    \"properties\": {\n        \"module\": {\n            \"type\": \"string\",\n            \"title\": \"模块名称\"\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"title\": \"功能名称\"\n        },\n        \"code\": {\n            \"type\": \"string\",\n            \"title\": \"功能编码\"\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/schema/function/searchSchema.js","export default {\n    \"module\": {\n        \"ui:widget\": \"input\",\n        \"ui:options\": {\n            \"type\": \"text\",\n            \"placeholder\": \"模块模糊查询\"\n        },//组件属性配置\n        \"ui:title\": \"模块名称\",//覆盖schema 中定义的title\n        \"ui:description\": \"\"\n    },\n    \"name\": {\n        \"ui:widget\": \"input\",\n        \"ui:options\": {\n            \"type\": \"text\",\n            \"placeholder\": \"功能模糊查询\"\n        },\n        \"ui:title\": \"功能名称\",\n        \"ui:description\": \"\"\n    },\n    \"code\": {\n        \"ui:widget\": \"input\",\n        \"ui:options\": {\n            \"type\": \"text\",\n            \"placeholder\": \"编码模糊查询\"\n        },\n        \"ui:title\": \"模块编码\",\n        \"ui:description\": \"\"\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/schema/function/searchUiSchema.js","export default {\n    \"$id\": \"function-edit-schema\",\n    \"title\": \"function-edit-schema\",\n    \"description\": \"function-edit-schema.\",\n    \"type\": \"object\",\n    \"required\": [\"moduleId\", \"name\", \"code\"],//可传给后端判断，暂时不使用此处配置检验前端表单,前端表单校验规则配置在uiSchema\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"moduleId\": {\n            \"type\": \"string\",\n            \"title\": \"模块Id\",\n            \"description\": \"相关菜单模块\"\n        },\n        \"module\": {\n            \"type\": \"string\",\n            \"title\": \"模块名称\",\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"title\": \"功能名称\",\n            \"maxLength\": 25,//可传给后端判断，暂时不使用此处配置检验前端表单,前端表单校验规则配置在uiSchema\n            \"minLength\": 1\n        },\n        \"code\": {\n            \"type\": \"string\",\n            \"title\": \"功能编码\",\n            \"maxLength\": 25,\n            \"minLength\": 1\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"title\": \"功能描述\",\n            \"maxLength\": 300,\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/schema/function/editSchema.js","export default {\n    \"name\": {\n        \"ui:widget\": \"input\",\n        \"ui:options\": {\n            \"type\": \"text\",\n            \"placeholder\": \"\"\n        },\n        \"ui:rules\": [\n            { required: true, message: '请输入功能名称' },\n            { max: 25, message: '最多输入25字符' }\n        ],//校验规则\n        \"ui:title\": \"功能名称\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            //\"extra\":\"121212\",//未设置取ui:description\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }//Form.Item 配置\n    },\n    \"code\": {\n        \"ui:widget\": \"input\",\n        \"ui:options\": {\n            \"type\": \"text\",\n            \"placeholder\": \"\"\n        },\n        \"ui:rules\": [\n            { required: true, message: '请输入功能编码' },\n            { max: 25, message: '最多输入25字符' }\n        ],//校验规则\n        \"ui:title\": \"功能编码\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            //\"extra\":\"121212\",//未设置取ui:description\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }//Form.Item 配置\n    },\n    \"description\": {\n        \"ui:widget\": \"input.textarea\",\n        \"ui:options\": {\n            \"style\": {\n                \"width\": 400,\n                \"height\": 200\n            },\n            \"autoSize\": { minRows: 2, maxRows: 6 },\n            \"placeholder\": \"\"\n        },\n        \"ui:rules\": [\n            { max: 300, message: '最多输入300字符!' }\n        ],//校验规则\n        \"ui:title\": \"功能描述\",\n        \"ui:description\": \"\",\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            //\"extra\":\"121212\",//未设置取ui:description\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }//Form.Item 配置\n    },\n    \"moduleId\": {\n        \"ui:widget\": \"cascader\",//级联\n        \"ui:options\": {\n            \"fieldNames\": { label: 'title', value: 'id', children: 'children' },\n            \"options\": []\n        },//组件属性配置\n        \"ui:rules\": [{ required: true, message: '请选择模块!' }],//校验规则\n        \"ui:remoteConfig\": {\n            \"apiKey\": \"getAllMenu\",\n            \"hand\": (data) => {\n                return data;\n            },//数据处理函数\n        },\n        \"ui:title\": \"模块\",//未设置取schema 中定义的title\n        //\"ui:description\": \"请选择模块\",//未设置取 schema 中定义的description\n        \"ui:formItemConfig\": {\n            \"hasFeedback\": true,\n            //\"extra\":\"121212\",//未设置取ui:description\n            \"label\": \"模块\",//未设置取ui:title,\n            \"labelCol\": { span: 6 },\n            \"wrapperCol\": { span: 16 }\n        }//Form.Item 配置\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/schema/function/editUiSchema.js","import React from 'react';\nimport { Table, Popconfirm, Divider, Button, Modal, notification } from 'antd';\nimport {\n    getFunctionPagedList,\n    delFunction,\n    delFunctions,\n    saveFunction\n} from 'api';\nimport SearchForm from '@/schema/SearchForm';\nimport CommonForm from '@/schema/CommonForm';\nimport schema from '@/schema/function';\nimport PermissionContainer from 'permission';\nimport formRemoteDataUtil from '@/schema/FormRemoteDataUtil';\nimport util from '@/utils/util';\n\nconst style = { display: 'none' };\n\nclass Function extends React.PureComponent {\n    state = {\n        filter: {\n            module: \"\",\n            name: \"\",\n            code: \"\"\n        },\n        expand: true,\n        selectedRowKeys: [],\n        pagedList: [],\n        pagination: {\n            current: 1,\n            pageSize: 10,\n            showQuickJumper: true,\n            showSizeChanger: true,\n            showTotal: total => `Total ${total} items`\n        },\n        sorter: {\n            field: '',\n            order: ''\n        },\n        loading: false,\n        editModalVisible: false\n    }\n    columns = [{\n        title: '模块名称',\n        dataIndex: 'module',\n        sorter: true\n    },\n    {\n        title: '功能名称',\n        dataIndex: 'name',\n        sorter: true\n    },\n    {\n        title: '功能编码',\n        dataIndex: 'code',\n        sorter: true\n    },\n    {\n        title: '操作',\n        dataIndex: 'id',\n        fixed: 'right',\n        width: 180,\n        render: (text, record) => {\n            return <div>\n                <Button\n                    type=\"link\"\n                    onClick={() => this.editFunction(record)}\n\n                >\n                    编辑\n                </Button>\n                <Divider type=\"vertical\" />\n                <Popconfirm title=\"确定删除?\" onConfirm={() => this.delFunction(record.id)}>\n                    <Button type=\"link\">删除</Button>\n                </Popconfirm>\n            </div>\n        }\n    }]\n    editFormData = {\n\n    }\n    fetch = async (query = {}) => {\n        this.setState({ loading: true });\n        let dataRes = await getFunctionPagedList(query);\n        let data = dataRes.data;\n        const pagination = { ...this.state.pagination };\n        pagination.total = data.totalCount;\n        this.setState({\n            loading: false,\n            pagedList: data.rows,\n            pagination,\n        });\n    }\n    handleTableChange = (pagination, filters, sorter) => {\n        const pager = { ...this.state.pagination };\n        pager.current = pagination.current;\n        pager.pageSize = pagination.pageSize;\n        this.setState({\n            pagination: pager,\n            sorter: {\n                field: sorter.field,\n                order: sorter.order\n            }\n        });\n        let query = {\n            pageIndex: pager.current,\n            pageSize: pager.pageSize,\n            sortBy: sorter.field,\n            descending: sorter.order === 'descend',\n            filter: this.state.filter\n        };\n        this.fetch(query);\n    }\n    handleSearch = (filter) => {\n        const pager = { ...this.state.pagination };\n        pager.current = 1;//查询回到第一页\n        this.setState({\n            filter: filter,\n            pagination: pager\n        });\n        let query = {\n            pageIndex: 1,\n            pageSize: this.state.pagination.pageSize,\n            sortBy: this.state.sorter.field,\n            descending: this.state.sorter.order === 'descend',\n            filter: filter\n        };\n        this.fetch(query);\n    }\n    handleReset = () => {\n        this.setState({\n            filter: {}\n        });\n    }\n    onSelectChange = (selectedRowKeys) => {\n        this.setState({ selectedRowKeys });\n    }\n    delFunction = async (id) => {\n        try {\n            await delFunction({ id: id });\n            notification.success({\n                placement: 'bottomLeft bottomRight',\n                message: '删除成功',\n            });\n        } catch (e) {\n\n        }\n        this.refresh()\n    }\n    batchDelFunction = async () => {\n        try {\n            await delFunctions({\n                ids: JSON.stringify(\n                    this.state.selectedRowKeys.map(s => {\n                        return s;\n                    })\n                )\n            });\n            this.setState({\n                selectedRowKeys: []\n            })\n            notification.success({\n                placement: 'bottomLeft bottomRight',\n                message: '删除成功',\n            });\n        } catch (e) {\n\n        }\n        this.refresh()\n    }\n    addFunction = () => {\n        this.editFormData = {}\n        this.setState({\n            editModalVisible: true\n        })\n    }\n    editFunction = (record) => {\n        let menuList = formRemoteDataUtil.getData(schema.editSchema[\"$id\"] + \"_moduleId\");\n        let openMenuList = util.openTreeData(menuList);\n        let menuWithParent = util.getTreeEleWithParent(record.moduleId, openMenuList);\n        let moduleId = menuWithParent.map(s => s.id);\n        this.editFormData = { ...record, moduleId };\n        this.setState({\n            editModalVisible: true\n        })\n    }\n    saveFunction = async (data) => {\n        let formData = { ...this.editFormData, ...data }\n        let menuList = formRemoteDataUtil.getData(schema.editSchema[\"$id\"] + \"_moduleId\");\n        formData.moduleId = formData.moduleId[formData.moduleId.length - 1]\n        let menu = util.getTreeEleByPropertyValue(formData.moduleId, \"id\", menuList);\n        formData.module = menu.title;\n        try {\n            await saveFunction(formData);\n\n            this.setState({\n                editModalVisible: false\n            });\n            notification.success({\n                placement: 'bottomLeft bottomRight',\n                message: '保存成功',\n            });\n        }\n        catch (e) {\n\n        }\n        this.refresh()\n    }\n    editModalOnOk = () => {\n        //不直接调用saveFunction，是因为form组件内部会先校验表单，通过才会调用通过props传进去的saveFunction\n        this.editFunctionForm.handleSubmit();\n    }\n    editModalOnCancel = () => {\n        this.setState({\n            editModalVisible: false\n        });\n    }\n    refresh = () => {\n        let query = {\n            pageIndex: this.state.pagination.current,\n            pageSize: this.state.pagination.pageSize,\n            sortBy: this.state.sorter.field,\n            descending: this.state.sorter.order === 'descend',\n            filter: this.state.filter\n        };\n        this.fetch(query);\n    }\n    componentDidMount() {\n        this.fetch({\n            pageIndex: this.state.pagination.current,\n            pageSize: this.state.pagination.pageSize,\n            filter: this.state.filter\n        });\n    }\n    render() {\n        console.log(\"Function render\")\n        const { selectedRowKeys } = this.state;\n        const rowSelection = {\n            selectedRowKeys,\n            onChange: this.onSelectChange,\n        };\n        const hasSelected = selectedRowKeys.length > 0;\n        return (\n            <div>\n                <SearchForm schema={schema.searchSchema} uiSchema={schema.searchUiSchema} handleSubmit={this.handleSearch} handleReset={this.handleReset} />\n                <Divider />\n                <div style={{ marginBottom: 16 }}>\n                    <PermissionContainer permission={[\"function_edit\"]}>\n                        <Button\n                            type=\"primary\"\n                            icon=\"plus-square-o\"\n                            onClick={this.addFunction}\n                        >\n                            新增\n                    </Button>\n                    </PermissionContainer>\n                    <Divider type=\"vertical\" />\n                    <PermissionContainer permission={[\"function_del\"]}>\n                        <Popconfirm title=\"确定删除?\" onConfirm={this.batchDelFunction}>\n                            <Button\n                                type=\"danger\"\n                                disabled={!hasSelected}\n                                icon=\"delete\"\n                            >\n                                删除\n                        </Button>\n                        </Popconfirm>\n                    </PermissionContainer>\n                </div>\n                <Table\n                    rowSelection={rowSelection}\n                    columns={this.columns}\n                    rowKey={record => record.id}\n                    dataSource={this.state.pagedList}\n                    pagination={this.state.pagination}\n                    loading={this.state.loading}\n                    onChange={this.handleTableChange}\n                    scroll={{ x: 768 }}\n                    bordered\n                />\n                <Modal\n                    visible={this.state.editModalVisible}\n                    cancelText=\"关闭\"\n                    okText=\"提交\"\n                    title={this.editFormData.id ? '编辑功能' : '新增功能'}\n                    onCancel={this.editModalOnCancel}\n                    onOk={this.editModalOnOk}\n                    destroyOnClose\n                >\n                    <CommonForm\n                        ref={(instance) => { this.editFunctionForm = instance; }}\n                        schema={schema.editSchema}\n                        uiSchema={schema.editUiSchema}\n                        formData={this.editFormData}\n                        handleSubmit={this.saveFunction}\n                    />\n                </Modal>\n                {/* 隐藏组件,做数据初始化,style不先定义每次父组件render都会跟着render */}\n                <CommonForm\n                    schema={schema.editSchema}\n                    uiSchema={schema.editUiSchema}\n                    style={style}\n                />\n            </div>\n        );\n    }\n}\n\nexport default Function;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Function.jsx"],"sourceRoot":""}